# Learn More v1.0 项目结构与文件介绍

本文档旨在提供项目文件结构的全面概览，帮助开发者快速理解各个目录和文件的用途。

## 根目录

*   **`package.json`**: 项目的 npm 配置文件，包含依赖列表、脚本命令（如 `dev`, `build`, `lint`）和项目元数据。
*   **`tsconfig.json`**: TypeScript 编译配置文件，定义了 TS 编译选项和路径别名（如 `@/*` 指向 `src/*`）。
*   **`next.config.ts`**: Next.js 框架的配置文件，用于定制路由、图片优化、环境变量等。
*   **`tailwind.config.ts`**: Tailwind CSS 配置文件，定义了主题、插件和内容扫描路径。
*   **`postcss.config.mjs`**: PostCSS 配置文件，配合 Tailwind CSS 使用。
*   **`vitest.config.ts`**: Vitest 测试框架配置文件，用于单元测试和集成测试。
*   **`eslint.config.mjs`**: ESLint 代码检查配置文件，定义代码风格规则。
*   **`CLAUDE.md` / `gemini.md`**: AI 助手的上下文配置文件，包含项目规范、常用命令和记忆库引用。
*   **`README.md`**: 项目的入口文档，通常包含项目简介、安装步骤和快速开始指南。
*   **`components.json`**: shadcn/ui 配置文件，用于管理 UI 组件库的设置。
*   **`.env.example`**: 环境变量示例文件，列出了项目运行所需的必要环境变量。

## `src/` (源代码目录)

这是项目的核心代码目录，包含所有前端页面、后端逻辑、组件和工具函数。

### `src/app/` (Next.js App Router)
基于文件系统的路由目录。

*   **`layout.tsx`**: 全局根布局文件，包含 `html` 和 `body` 标签，以及全局 Providers。
*   **`page.tsx`**: 项目首页（Landing Page）。
*   **`globals.css`**: 全局样式文件，引入了 Tailwind 指令。
*   **`(auth)/`**: 认证相关路由组（路由路径中不包含 `(auth)`）。
    *   **`login/page.tsx`**: 登录页面。
    *   **`register/page.tsx`**: 注册页面。
    *   **`layout.tsx`**: 认证页面的专用布局。
*   **`(dashboard)/`**: 仪表盘相关路由组（路由路径中不包含 `(dashboard)`）。
    *   **`dashboard/`**: 学生主控台页面，包含概览、社区、排行榜等子页面。
    *   **`layout.tsx`**: 仪表盘布局，通常包含侧边栏和顶部导航。
*   **`course/[subjectId]/`**: 课程学习页面动态路由，根据 `subjectId` 加载对应课程内容。
*   **`error-book/`**: 错题本页面。
*   **`api/`**: Next.js API Routes，用于处理特定后端请求（如定时任务 `cron`）。

### `src/actions/` (Server Actions)
封装了与数据库交互的服务器端操作，用于在客户端组件中直接调用。

*   **`auth.ts`**: 用户认证相关操作。
*   **`community.ts`**: 社区帖子、评论相关操作。
*   **`dashboard.ts`**: 仪表盘数据获取操作。
*   **`error-book.ts`**: 错题本增删改查操作。
*   **`leaderboard.ts`**: 排行榜数据获取操作。
*   **`profile.ts`**: 用户个人资料更新操作。
*   **`progress.ts`**: 学习进度记录与更新操作。
*   **`quiz.ts`**: 测验提交与评分逻辑操作。
*   **`storage.ts`**: 文件上传（如头像）相关操作。
*   **`subject.ts`**: 学科与课程目录获取操作。
*   **`__tests__/`**: 对应 Server Actions 的单元测试文件。

### `src/components/` (组件库)

*   **`ui/`**: 基础 UI 组件（主要来自 shadcn/ui），如 Button, Card, Input, Dialog 等。
*   **`business/`**: 业务组件，特定于本项目功能的组件。
    *   **`AppSidebar.tsx`**: 仪表盘侧边栏。
    *   **`CourseTree.tsx`**: 课程目录树形结构组件。
    *   **`VideoPlayer.tsx` / `LessonVideoPlayer.tsx`**: 视频播放器组件。
    *   **`DailyInspiration.tsx`**: 每日励志语录组件。
    *   **`charts/`**: 数据可视化图表组件。
    *   **`community/`**: 论坛/社区相关组件。
    *   **`question/`**: 题目展示与交互组件。
    *   **`quiz/`**: 测验模式相关组件。
*   **`layout/`**: 布局相关组件，如 `LandingPageNavbar.tsx`。

### `src/lib/` (工具库)

*   **`prisma.ts`**: Prisma Client 单例实例，用于数据库连接。
*   **`utils.ts`**: 通用工具函数，如 `cn` (class names) 合并工具。
*   **`supabase/`**: Supabase 客户端初始化配置（区分客户端和服务端）。
*   **`store/`**: 状态管理（如 Zustand stores）。
    *   **`quiz-store.ts`**: 测验状态管理。
*   **`hooks/`**: 自定义 React Hooks，如 `useDebounce.ts`。
*   **`leaderboard/`**: 排行榜相关的特定逻辑适配器。

### `src/types/` (类型定义)
存放 TypeScript 类型定义文件，用于跨模块共享类型。

### `src/middleware.ts`
Next.js 中间件，用于处理路由拦截、权限验证（如保护 dashboard 路由）。

## `prisma/` (数据库)

*   **`schema.prisma`**: 数据库模型定义文件，描述了 User, Course, Progress, Post 等数据表结构。
*   **`seed.ts`**: 数据库种子脚本，用于初始化测试数据。
*   **`seed-posts.ts`**: 社区帖子种子数据。

## `supabase/` (后端服务)

*   **`migrations/`**: SQL 迁移文件，用于手动应用一些 Prisma 不支持的 Supabase 特定配置（如 Storage Policies, Triggers）。
    *   `001_auth_trigger.sql`: 用户注册时自动创建 public.users 记录的触发器。
    *   `002_storage_avatars.sql`: 头像存储桶策略。
    *   `003_storage_videos.sql`: 视频存储桶策略。

## `docs/` (文档)

*   **`memory-bank/`**: **核心记忆库**，记录项目的上下文、需求、架构和进度，是 AI 维护项目一致性的关键。
    *   `active_context.md`: 当前工作上下文。
    *   `product_requirements.md`: 产品需求文档 (PRD)。
    *   `tech_stack.md`: 技术栈规范。
    *   `architecture.md`: 系统架构设计。
    *   `progress.md`: 开发进度追踪。
*   **`stories/`**: 用户故事（需求卡片）。
    *   `completed/`: 已完成的故事。
    *   `active/`: 正在进行的故事。
    *   `backlog/`: 待办故事。
*   **`api/`**: API 接口文档说明。

## `scripts/` (脚本)
存放项目辅助脚本（目前已清理部分临时脚本）。
