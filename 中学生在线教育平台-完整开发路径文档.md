# ä¸­å­¦ç”Ÿåœ¨çº¿æ•™è‚²å¹³å° - å®Œæ•´å¼€å‘è·¯å¾„æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [1. é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
- [2. äº§å“åŠŸèƒ½æ‹†è§£](#2-äº§å“åŠŸèƒ½æ‹†è§£)
- [3. æŠ€æœ¯æ¶æ„è®¾è®¡](#3-æŠ€æœ¯æ¶æ„è®¾è®¡)
- [4. æ•°æ®åº“è®¾è®¡](#4-æ•°æ®åº“è®¾è®¡)
- [5. API æ¥å£è®¾è®¡](#5-api-æ¥å£è®¾è®¡)
- [6. å¼€å‘è·¯çº¿å›¾](#6-å¼€å‘è·¯çº¿å›¾)
- [7. æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ](#7-æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ)
- [8. æ€§èƒ½ä¸æ‰©å±•æ€§](#8-æ€§èƒ½ä¸æ‰©å±•æ€§)
- [9. æˆæœ¬é¢„ç®—](#9-æˆæœ¬é¢„ç®—)
- [10. è´¨é‡ä¿è¯](#10-è´¨é‡ä¿è¯)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯

ä¸­å­¦ç”Ÿåœ¨çº¿æ•™è‚²å¹³å°æ˜¯ä¸€ä¸ªé¢å‘åˆä¸­å­¦ç”Ÿçš„ç»¼åˆæ€§å­¦ä¹ å¹³å°ï¼Œæä¾›è¯¾ç¨‹å­¦ä¹ ã€é¢˜åº“ç»ƒä¹ ã€å­¦ä¹ ç»Ÿè®¡ã€ç¤¾åŒºè®¨è®ºç­‰åŠŸèƒ½ï¼Œå¸®åŠ©å­¦ç”Ÿæå‡å­¦ä¹ æ•ˆç‡å’Œæˆç»©ã€‚

### 1.2 äº§å“å®šä½

- **ç›®æ ‡ç”¨æˆ·**ï¼šåˆä¸­7-9å¹´çº§å­¦ç”Ÿï¼ˆ12-16å²ï¼‰
- **æ ¸å¿ƒä»·å€¼**ï¼šä¸ªæ€§åŒ–å­¦ä¹ ã€æ•°æ®é©±åŠ¨ã€æ¸¸æˆåŒ–æ¿€åŠ±
- **äº§å“å½¢æ€**ï¼šWeb åº”ç”¨ï¼ˆå“åº”å¼è®¾è®¡ï¼Œæ”¯æŒç§»åŠ¨ç«¯ï¼‰

### 1.3 æ ¸å¿ƒåŠŸèƒ½

1. âœ… ç”¨æˆ·ç³»ç»Ÿï¼ˆæ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†ï¼‰
2. âœ… è¯¾ç¨‹å­¦ä¹ ï¼ˆ6å¤§å­¦ç§‘ï¼Œè§†é¢‘+æ–‡æ¡£ï¼‰
3. âœ… é¢˜åº“ç»ƒä¹ ï¼ˆæ™ºèƒ½ç»„å·ã€è‡ªåŠ¨æ‰¹æ”¹ï¼‰
4. âœ… å­¦ä¹ ç»Ÿè®¡ï¼ˆå¤šç»´åº¦æ•°æ®åˆ†æï¼‰
5. âœ… è®¨è®ºç¤¾åŒºï¼ˆå­¦ä¹ äº¤æµã€é—®é¢˜è§£ç­”ï¼‰
6. âœ… æˆé•¿ç³»ç»Ÿï¼ˆç­‰çº§ã€æˆå°±ã€æ’è¡Œæ¦œï¼‰

### 1.4 è®¾è®¡ç¨¿

Figma è®¾è®¡ç¨¿å·²å®Œæˆï¼ŒåŒ…å«ï¼š
- é¦–é¡µä»ªè¡¨ç›˜
- å­¦ä¹ æ¨¡å—ï¼ˆ6å¤§å­¦ç§‘ï¼‰
- é¢˜åº“ç»ƒä¹ 
- è®¨è®ºåŒº
- æˆé•¿ä¸­å¿ƒ
- ç”¨æˆ·ä¸­å¿ƒ

è®¾è®¡é“¾æ¥ï¼šhttps://www.figma.com/make/xOrPWIHw7gqEuKx2oBkayC

---

## 2. äº§å“åŠŸèƒ½æ‹†è§£

### 2.1 ç”¨æˆ·ç³»ç»Ÿ

#### åŠŸèƒ½åˆ—è¡¨
- **æ³¨å†Œç™»å½•**
  - æ‰‹æœºå·/é‚®ç®±æ³¨å†Œ
  - éªŒè¯ç ç™»å½•
  - å¯†ç ç™»å½•
  - ç¬¬ä¸‰æ–¹ç™»å½•ï¼ˆå¾®ä¿¡ã€QQï¼‰å¯é€‰

- **ç”¨æˆ·ä¿¡æ¯ç®¡ç†**
  - åŸºæœ¬èµ„æ–™ï¼ˆå§“åã€å¹´çº§ã€ç­çº§ï¼‰
  - å¤´åƒä¸Šä¼ 
  - è”ç³»æ–¹å¼
  - å­¦ä¹ åå¥½è®¾ç½®

- **æƒé™ç®¡ç†**
  - å­¦ç”Ÿè§’è‰²
  - æ•™å¸ˆè§’è‰²ï¼ˆV2.0ï¼‰
  - ç®¡ç†å‘˜è§’è‰²
  - å®¶é•¿è§’è‰²ï¼ˆV2.0ï¼‰

#### æ•°æ®è¡¨è®¾è®¡
```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(100) UNIQUE,
  phone VARCHAR(20) UNIQUE,
  password_hash VARCHAR(255) NOT NULL,
  role VARCHAR(20) DEFAULT 'student',
  status VARCHAR(20) DEFAULT 'active',
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ç”¨æˆ·èµ„æ–™è¡¨
CREATE TABLE user_profiles (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  real_name VARCHAR(50),
  avatar_url VARCHAR(255),
  grade INTEGER,
  class_name VARCHAR(50),
  school VARCHAR(100),
  location VARCHAR(100),
  bio TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

---

### 2.2 è¯¾ç¨‹å­¦ä¹ æ¨¡å—

#### åŠŸèƒ½åˆ—è¡¨
- **è¯¾ç¨‹ä½“ç³»**
  - 6å¤§å­¦ç§‘ï¼šæ•°å­¦ã€è¯­æ–‡ã€è‹±è¯­ã€ç‰©ç†ã€åŒ–å­¦ã€ç”Ÿç‰©
  - ç« èŠ‚ç®¡ç†ï¼ˆæ¯å­¦ç§‘4-6ä¸ªç« èŠ‚ï¼‰
  - è¯¾æ—¶ç®¡ç†ï¼ˆè§†é¢‘ã€æ–‡æ¡£ã€ä¹ é¢˜ï¼‰

- **å­¦ä¹ åŠŸèƒ½**
  - è§†é¢‘æ’­æ”¾ï¼ˆé˜²ç›—é“¾ã€å€é€Ÿã€æ–­ç‚¹ç»­æ’­ï¼‰
  - æ–‡æ¡£é˜…è¯»
  - å­¦ä¹ è¿›åº¦è¿½è¸ª
  - è¯¾ç¨‹è§£é”æœºåˆ¶ï¼ˆé¡ºåºå­¦ä¹ ï¼‰

- **å­¦ä¹ è®°å½•**
  - è§‚çœ‹æ—¶é•¿ç»Ÿè®¡
  - è¯¾ç¨‹å®ŒæˆçŠ¶æ€
  - å­¦ä¹ æ—¶é—´åˆ†å¸ƒ

#### æ•°æ®è¡¨è®¾è®¡
```sql
-- å­¦ç§‘è¡¨
CREATE TABLE subjects (
  id SERIAL PRIMARY KEY,
  name VARCHAR(50) NOT NULL,
  icon VARCHAR(10),
  color VARCHAR(20),
  description TEXT,
  sort_order INTEGER,
  status VARCHAR(20) DEFAULT 'active',
  created_at TIMESTAMP DEFAULT NOW()
);

-- ç« èŠ‚è¡¨
CREATE TABLE chapters (
  id SERIAL PRIMARY KEY,
  subject_id INTEGER REFERENCES subjects(id),
  title VARCHAR(100) NOT NULL,
  description TEXT,
  sort_order INTEGER,
  created_at TIMESTAMP DEFAULT NOW()
);

-- è¯¾æ—¶è¡¨
CREATE TABLE lessons (
  id SERIAL PRIMARY KEY,
  chapter_id INTEGER REFERENCES chapters(id),
  title VARCHAR(100) NOT NULL,
  type VARCHAR(20), -- video, document, exercise
  content_url VARCHAR(255),
  duration INTEGER, -- è§†é¢‘æ—¶é•¿ï¼ˆç§’ï¼‰
  sort_order INTEGER,
  is_free BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT NOW()
);

-- å­¦ä¹ è¿›åº¦è¡¨
CREATE TABLE user_learning_progress (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  lesson_id INTEGER REFERENCES lessons(id),
  progress INTEGER DEFAULT 0, -- è¿›åº¦ç™¾åˆ†æ¯”
  duration INTEGER DEFAULT 0, -- å·²å­¦ä¹ æ—¶é•¿
  completed BOOLEAN DEFAULT false,
  last_position INTEGER DEFAULT 0, -- è§†é¢‘æ’­æ”¾ä½ç½®
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(user_id, lesson_id)
);
```

---

### 2.3 é¢˜åº“ç»ƒä¹ æ¨¡å—

#### åŠŸèƒ½åˆ—è¡¨
- **é¢˜åº“ç®¡ç†**
  - æŒ‰å­¦ç§‘åˆ†ç±»
  - æŒ‰ç« èŠ‚åˆ†ç±»
  - æŒ‰éš¾åº¦åˆ†ç±»ï¼ˆç®€å•ã€ä¸­ç­‰ã€å›°éš¾ï¼‰
  - é¢˜å‹æ”¯æŒï¼ˆå•é€‰ã€å¤šé€‰ã€åˆ¤æ–­ã€å¡«ç©ºã€ç®€ç­”ï¼‰

- **ç»ƒä¹ åŠŸèƒ½**
  - ç»ƒä¹ é›†ç®¡ç†
  - æ™ºèƒ½ç»„å·
  - ç­”é¢˜è®¡æ—¶
  - è‡ªåŠ¨æ‰¹æ”¹ï¼ˆå®¢è§‚é¢˜ï¼‰
  - ç­”é¢˜æŠ¥å‘Š

- **é”™é¢˜æœ¬**
  - é”™é¢˜è®°å½•
  - é”™é¢˜åˆ†æ
  - é”™é¢˜é‡åš

#### æ•°æ®è¡¨è®¾è®¡
```sql
-- é¢˜ç›®è¡¨
CREATE TABLE questions (
  id SERIAL PRIMARY KEY,
  subject_id INTEGER REFERENCES subjects(id),
  chapter_id INTEGER REFERENCES chapters(id),
  type VARCHAR(20), -- single_choice, multiple_choice, true_false, fill_blank, essay
  difficulty VARCHAR(20), -- easy, medium, hard
  content TEXT NOT NULL,
  answer TEXT, -- æ ‡å‡†ç­”æ¡ˆ
  explanation TEXT, -- è§£æ
  points INTEGER DEFAULT 1, -- åˆ†å€¼
  created_at TIMESTAMP DEFAULT NOW()
);

-- é€‰é¡¹è¡¨ï¼ˆç”¨äºé€‰æ‹©é¢˜ï¼‰
CREATE TABLE question_options (
  id SERIAL PRIMARY KEY,
  question_id INTEGER REFERENCES questions(id),
  option_key VARCHAR(10), -- A, B, C, D
  option_content TEXT NOT NULL,
  is_correct BOOLEAN DEFAULT false,
  sort_order INTEGER
);

-- ç»ƒä¹ é›†è¡¨
CREATE TABLE question_sets (
  id SERIAL PRIMARY KEY,
  subject_id INTEGER REFERENCES subjects(id),
  title VARCHAR(100) NOT NULL,
  description TEXT,
  difficulty VARCHAR(20),
  question_count INTEGER,
  time_limit INTEGER, -- æ—¶é•¿é™åˆ¶ï¼ˆåˆ†é’Ÿï¼‰
  created_at TIMESTAMP DEFAULT NOW()
);

-- ç­”é¢˜è®°å½•è¡¨
CREATE TABLE user_answers (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  question_id INTEGER REFERENCES questions(id),
  question_set_id INTEGER REFERENCES question_sets(id),
  user_answer TEXT,
  is_correct BOOLEAN,
  score INTEGER,
  time_spent INTEGER, -- ç­”é¢˜ç”¨æ—¶ï¼ˆç§’ï¼‰
  created_at TIMESTAMP DEFAULT NOW()
);

-- é”™é¢˜æœ¬è¡¨
CREATE TABLE wrong_questions (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  question_id INTEGER REFERENCES questions(id),
  wrong_count INTEGER DEFAULT 1,
  mastered BOOLEAN DEFAULT false,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(user_id, question_id)
);
```

---

### 2.4 è®¨è®ºç¤¾åŒºæ¨¡å—

#### åŠŸèƒ½åˆ—è¡¨
- **å¸–å­ç®¡ç†**
  - å‘å¸ƒå¸–å­
  - ç¼–è¾‘å¸–å­
  - åˆ é™¤å¸–å­
  - å¸–å­åˆ†ç±»ï¼ˆæŒ‰å­¦ç§‘ï¼‰
  - çƒ­é—¨å¸–å­

- **äº’åŠ¨åŠŸèƒ½**
  - è¯„è®ºå›å¤
  - ç‚¹èµ
  - æ”¶è—
  - æœç´¢

- **å†…å®¹å®¡æ ¸**
  - æ•æ„Ÿè¯è¿‡æ»¤
  - äººå·¥å®¡æ ¸

#### æ•°æ®è¡¨è®¾è®¡
```sql
-- å¸–å­è¡¨
CREATE TABLE posts (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  subject_id INTEGER REFERENCES subjects(id),
  title VARCHAR(200) NOT NULL,
  content TEXT NOT NULL,
  view_count INTEGER DEFAULT 0,
  like_count INTEGER DEFAULT 0,
  comment_count INTEGER DEFAULT 0,
  is_hot BOOLEAN DEFAULT false,
  status VARCHAR(20) DEFAULT 'published', -- draft, published, deleted
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- è¯„è®ºè¡¨
CREATE TABLE comments (
  id SERIAL PRIMARY KEY,
  post_id INTEGER REFERENCES posts(id),
  user_id INTEGER REFERENCES users(id),
  parent_id INTEGER REFERENCES comments(id), -- å›å¤çš„è¯„è®ºID
  content TEXT NOT NULL,
  like_count INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ç‚¹èµè¡¨
CREATE TABLE post_likes (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  post_id INTEGER REFERENCES posts(id),
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(user_id, post_id)
);

-- æ”¶è—è¡¨
CREATE TABLE post_favorites (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  post_id INTEGER REFERENCES posts(id),
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(user_id, post_id)
);
```

---

### 2.5 å­¦ä¹ ç»Ÿè®¡æ¨¡å—

#### åŠŸèƒ½åˆ—è¡¨
- **é¦–é¡µæ¦‚è§ˆ**
  - ä»Šæ—¥å­¦ä¹ æ—¶é•¿
  - æœ¬å‘¨å®Œæˆé¢˜ç›®æ•°
  - ç´¯è®¡è·å¾—å‹‹ç« 
  - è¿›æ­¥æ’å

- **å­¦ä¹ æ•°æ®**
  - æ¯å‘¨å­¦ä¹ æ—¶é•¿å›¾è¡¨
  - æˆç»©è¶‹åŠ¿å›¾è¡¨
  - å„ç§‘ç« èŠ‚æŒæ¡åº¦
  - ç™¾åˆ†ä½æ’å
  - ç»ƒä¹ å¹³å‡åˆ†
  - æ¨¡æ‹Ÿè€ƒè¯•å¹³å‡åˆ†

- **ä»Šæ—¥ä»»åŠ¡**
  - ä»»åŠ¡åˆ—è¡¨
  - å®Œæˆè¿›åº¦
  - ä»»åŠ¡æé†’

#### æ•°æ®è¡¨è®¾è®¡
```sql
-- æ¯æ—¥ç»Ÿè®¡è¡¨
CREATE TABLE daily_stats (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  date DATE NOT NULL,
  study_duration INTEGER DEFAULT 0, -- å­¦ä¹ æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰
  questions_completed INTEGER DEFAULT 0, -- å®Œæˆé¢˜ç›®æ•°
  lessons_completed INTEGER DEFAULT 0, -- å®Œæˆè¯¾ç¨‹æ•°
  points_earned INTEGER DEFAULT 0, -- è·å¾—ç§¯åˆ†
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(user_id, date)
);

-- å­¦ç§‘ç»Ÿè®¡è¡¨
CREATE TABLE subject_stats (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  subject_id INTEGER REFERENCES subjects(id),
  total_lessons INTEGER DEFAULT 0,
  completed_lessons INTEGER DEFAULT 0,
  total_questions INTEGER DEFAULT 0,
  correct_questions INTEGER DEFAULT 0,
  avg_score DECIMAL(5,2) DEFAULT 0,
  updated_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(user_id, subject_id)
);

-- ç« èŠ‚æŒæ¡åº¦è¡¨
CREATE TABLE chapter_mastery (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  chapter_id INTEGER REFERENCES chapters(id),
  mastery_level INTEGER DEFAULT 0, -- 0-100
  practice_count INTEGER DEFAULT 0,
  correct_rate DECIMAL(5,2) DEFAULT 0,
  updated_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(user_id, chapter_id)
);
```

---

### 2.6 æˆé•¿ç³»ç»Ÿæ¨¡å—

#### åŠŸèƒ½åˆ—è¡¨
- **ç­‰çº§ç³»ç»Ÿ**
  - ç»éªŒå€¼ç´¯ç§¯
  - ç­‰çº§æå‡
  - ç­‰çº§ç‰¹æƒ

- **æˆå°±ç³»ç»Ÿ**
  - æˆå°±åˆ—è¡¨
  - æˆå°±è§£é”
  - æˆå°±å¥–åŠ±

- **æ’è¡Œæ¦œ**
  - ç­çº§æ’å
  - å¹´çº§æ’å
  - å­¦ç§‘æ’å
  - å‘¨/æœˆæ¦œå•

- **å­¦ä¹ æ‰“å¡**
  - è¿ç»­å­¦ä¹ å¤©æ•°
  - æ‰“å¡å¥–åŠ±

#### æ•°æ®è¡¨è®¾è®¡
```sql
-- ç”¨æˆ·ç­‰çº§è¡¨
CREATE TABLE user_levels (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id) UNIQUE,
  level INTEGER DEFAULT 1,
  experience INTEGER DEFAULT 0,
  next_level_exp INTEGER DEFAULT 100,
  updated_at TIMESTAMP DEFAULT NOW()
);

-- æˆå°±è¡¨
CREATE TABLE achievements (
  id SERIAL PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  description TEXT,
  icon VARCHAR(50),
  type VARCHAR(50), -- beginner, diligent, master, perfect_score, etc.
  condition_type VARCHAR(50), -- lessons_completed, questions_correct, streak_days
  condition_value INTEGER,
  reward_exp INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW()
);

-- ç”¨æˆ·æˆå°±è¡¨
CREATE TABLE user_achievements (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  achievement_id INTEGER REFERENCES achievements(id),
  progress INTEGER DEFAULT 0,
  unlocked BOOLEAN DEFAULT false,
  unlocked_at TIMESTAMP,
  UNIQUE(user_id, achievement_id)
);

-- æ’è¡Œæ¦œè¡¨ï¼ˆRedis å®æ—¶è®¡ç®—ï¼Œæ•°æ®åº“å®šæœŸå¿«ç…§ï¼‰
CREATE TABLE rankings (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  rank_type VARCHAR(50), -- class, grade, subject
  rank_value INTEGER, -- æ’å
  score INTEGER, -- ç§¯åˆ†
  period VARCHAR(50), -- week, month
  snapshot_date DATE,
  created_at TIMESTAMP DEFAULT NOW()
);

-- å­¦ä¹ æ‰“å¡è¡¨
CREATE TABLE user_checkins (
  id SERIAL PRIMARY KEY,
  user_id INTEGER REFERENCES users(id),
  checkin_date DATE NOT NULL,
  streak_days INTEGER DEFAULT 1,
  created_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(user_id, checkin_date)
);
```

---

## 3. æŠ€æœ¯æ¶æ„è®¾è®¡

### 3.1 æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å®¢æˆ·ç«¯å±‚                       â”‚
â”‚  React 18 + TypeScript + shadcn/ui              â”‚
â”‚  (å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“ HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   CDN å±‚                         â”‚
â”‚  é™æ€èµ„æºã€è§†é¢‘ã€å›¾ç‰‡åŠ é€Ÿ                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ç½‘å…³å±‚ / è´Ÿè½½å‡è¡¡                â”‚
â”‚  Nginx / API Gateway                            â”‚
â”‚  åŠŸèƒ½ï¼šè·¯ç”±ã€è®¤è¯ã€é™æµã€ç†”æ–­                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  åº”ç”¨å±‚ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ç”¨æˆ·æœåŠ¡ â”‚ è¯¾ç¨‹æœåŠ¡ â”‚ é¢˜åº“æœåŠ¡ â”‚ ç»Ÿè®¡æœåŠ¡ â”‚ â”‚
â”‚  â”‚  User    â”‚ Course   â”‚ Question â”‚   Stat   â”‚ â”‚
â”‚  â”‚ Service  â”‚ Service  â”‚ Service  â”‚ Service  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ è®¨è®ºæœåŠ¡ â”‚ æˆé•¿æœåŠ¡ â”‚ æ¶ˆæ¯æœåŠ¡ â”‚ æœç´¢æœåŠ¡ â”‚ â”‚
â”‚  â”‚Community â”‚ Growth   â”‚Notificationâ”‚ Search  â”‚ â”‚
â”‚  â”‚ Service  â”‚ Service  â”‚ Service  â”‚ Service  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                  â”‚
â”‚  æŠ€æœ¯æ ˆï¼šNestJS + Prisma                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ•°æ®å±‚ï¼ˆæŒä¹…åŒ–å­˜å‚¨ï¼‰                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚PostgreSQLâ”‚  Redis   â”‚ MongoDB  â”‚   OSS    â”‚ â”‚
â”‚  â”‚ å…³ç³»æ•°æ® â”‚   ç¼“å­˜   â”‚  æ–‡æ¡£å‹  â”‚ å¯¹è±¡å­˜å‚¨  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              åŸºç¡€è®¾æ–½å±‚ï¼ˆä¸­é—´ä»¶ï¼‰                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚æ¶ˆæ¯é˜Ÿåˆ—  â”‚ æœç´¢å¼•æ“ â”‚ ç›‘æ§å‘Šè­¦ â”‚ æ—¥å¿—ç³»ç»Ÿ â”‚ â”‚
â”‚  â”‚RabbitMQ  â”‚Elasticsearchâ”‚Prometheusâ”‚   ELK   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.2 æŠ€æœ¯æ ˆé€‰å‹

#### å‰ç«¯æŠ€æœ¯æ ˆ
```yaml
æ¡†æ¶: React 18
è¯­è¨€: TypeScript
æ„å»ºå·¥å…·: Vite
UI ç»„ä»¶åº“: shadcn/ui (åŸºäº Radix UI)
çŠ¶æ€ç®¡ç†: Zustand / Redux Toolkit
è·¯ç”±: React Router v6
HTTP å®¢æˆ·ç«¯: Axios + React Query
è¡¨å•éªŒè¯: Zod + React Hook Form
å›¾è¡¨: Recharts
å¯Œæ–‡æœ¬ç¼–è¾‘å™¨: Tiptap
CSS: Tailwind CSS
å›½é™…åŒ–: i18next
ä¸»é¢˜: CSS å˜é‡ï¼ˆæ”¯æŒäº®è‰²/æš—è‰²æ¨¡å¼ï¼‰
```

#### åç«¯æŠ€æœ¯æ ˆ
```yaml
æ¡†æ¶: NestJS
è¯­è¨€: TypeScript
ORM: Prisma
æ•°æ®åº“: PostgreSQL 14+
ç¼“å­˜: Redis 7+
å¯¹è±¡å­˜å‚¨: é˜¿é‡Œäº‘ OSS / AWS S3
æ¶ˆæ¯é˜Ÿåˆ—: RabbitMQ
æœç´¢å¼•æ“: Elasticsearch
API æ–‡æ¡£: Swagger / OpenAPI
è®¤è¯: JWT + Passport
éªŒè¯: class-validator
æ—¥å¿—: Winston
ç›‘æ§: Prometheus + Grafana
```

#### éƒ¨ç½²è¿ç»´
```yaml
å®¹å™¨åŒ–: Docker
ç¼–æ’: Kubernetes (å¯é€‰)
CI/CD: GitHub Actions / GitLab CI
å‰ç«¯æ‰˜ç®¡: Vercel / Netlify / Cloudflare Pages
åç«¯æ‰˜ç®¡: AWS / é˜¿é‡Œäº‘ / è…¾è®¯äº‘
æ•°æ®åº“: RDS (äº‘æ•°æ®åº“)
åŸŸå: è‡ªå®šä¹‰åŸŸå
SSLè¯ä¹¦: Let's Encrypt (å…è´¹) / äº‘å‚å•† SSL
ç›‘æ§: Sentry (é”™è¯¯ç›‘æ§) + Google Analytics
```

---

### 3.3 ä¸ºä»€ä¹ˆé€‰æ‹© NestJSï¼Ÿ

#### ä¼˜åŠ¿
1. âœ… **TypeScript åŸç”Ÿæ”¯æŒ**ï¼šå‰åç«¯ç»Ÿä¸€è¯­è¨€ï¼Œç±»å‹å…±äº«
2. âœ… **ä¼ä¸šçº§æ¡†æ¶**ï¼šæ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•
3. âœ… **ä¾èµ–æ³¨å…¥**ï¼šä»£ç è§£è€¦ï¼Œæ–¹ä¾¿æµ‹è¯•
4. âœ… **ä¸°å¯Œçš„ç”Ÿæ€**ï¼šå®˜æ–¹æä¾›å¤§é‡æ¨¡å—ï¼ˆè®¤è¯ã€ç¼“å­˜ã€é˜Ÿåˆ—ç­‰ï¼‰
5. âœ… **æ€§èƒ½ä¼˜å¼‚**ï¼šåŸºäº Express/Fastifyï¼Œé«˜æ€§èƒ½
6. âœ… **ä¸å‰ç«¯æŠ€æœ¯æ ˆç»Ÿä¸€**ï¼šé™ä½å­¦ä¹ æˆæœ¬

#### ä¸å…¶ä»–æ¡†æ¶å¯¹æ¯”

| ç‰¹æ€§ | NestJS | Spring Boot | Django | FastAPI |
|------|--------|-------------|--------|---------|
| è¯­è¨€ | TypeScript | Java | Python | Python |
| å­¦ä¹ æ›²çº¿ | ä¸­ç­‰ | é™¡å³­ | å¹³ç¼“ | å¹³ç¼“ |
| æ€§èƒ½ | â­â­â­â­ | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ |
| ç”Ÿæ€ | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ | â­â­â­ |
| å¼€å‘æ•ˆç‡ | â­â­â­â­â­ | â­â­â­ | â­â­â­â­ | â­â­â­â­â­ |
| ä¼ä¸šçº§ç‰¹æ€§ | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­ | â­â­â­ |
| å‰åç«¯ç»Ÿä¸€ | âœ… | âŒ | âŒ | âŒ |

---

### 3.4 å¾®æœåŠ¡æ‹†åˆ†å»ºè®®ï¼ˆV2.0ï¼‰

#### MVP/V1.0 é˜¶æ®µï¼šå•ä½“æ¶æ„
- æ‰€æœ‰æ¨¡å—åœ¨ä¸€ä¸ª NestJS åº”ç”¨ä¸­
- é€šè¿‡æ¨¡å—ï¼ˆModuleï¼‰è¿›è¡Œé€»è¾‘éš”ç¦»
- éƒ¨ç½²ç®€å•ï¼Œå¼€å‘æ•ˆç‡é«˜

#### V2.0 é˜¶æ®µï¼šå¾®æœåŠ¡æ¶æ„
å½“ç”¨æˆ·é‡è¶…è¿‡ 10000 æ—¶ï¼Œå¯ä»¥è€ƒè™‘æ‹†åˆ†ä¸ºå¾®æœåŠ¡ï¼š

```yaml
ç”¨æˆ·æœåŠ¡ (User Service):
  - ç”¨æˆ·æ³¨å†Œç™»å½•
  - ç”¨æˆ·ä¿¡æ¯ç®¡ç†
  - æƒé™ç®¡ç†

è¯¾ç¨‹æœåŠ¡ (Course Service):
  - è¯¾ç¨‹ç®¡ç†
  - å­¦ä¹ è¿›åº¦
  - è§†é¢‘ç®¡ç†

é¢˜åº“æœåŠ¡ (Question Service):
  - é¢˜ç›®ç®¡ç†
  - ç­”é¢˜è®°å½•
  - é”™é¢˜æœ¬

ç»Ÿè®¡æœåŠ¡ (Stats Service):
  - å­¦ä¹ ç»Ÿè®¡
  - æ•°æ®åˆ†æ
  - æŠ¥è¡¨ç”Ÿæˆ

ç¤¾åŒºæœåŠ¡ (Community Service):
  - å¸–å­ç®¡ç†
  - è¯„è®ºç®¡ç†
  - æœç´¢åŠŸèƒ½

æˆé•¿æœåŠ¡ (Growth Service):
  - ç­‰çº§ç³»ç»Ÿ
  - æˆå°±ç³»ç»Ÿ
  - æ’è¡Œæ¦œ
```

---

## 4. æ•°æ®åº“è®¾è®¡

### 4.1 æ•°æ®åº“ ER å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   users    â”‚â”€â”€1:1â”€â”€â”‚user_profilesâ”‚       â”‚  subjects  â”‚
â”‚    ç”¨æˆ·è¡¨   â”‚       â”‚  ç”¨æˆ·èµ„æ–™è¡¨  â”‚       â”‚   å­¦ç§‘è¡¨    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                          â”‚
      â”‚1                                         â”‚1
      â”‚                                          â”‚
      â”‚N                                         â”‚N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚user_learningâ”‚       â”‚  chapters  â”‚â”€â”€â”€1:Nâ”€â”€â”‚  lessons   â”‚
â”‚_progress   â”‚       â”‚   ç« èŠ‚è¡¨    â”‚       â”‚   è¯¾æ—¶è¡¨    â”‚
â”‚å­¦ä¹ è¿›åº¦è¡¨   â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚N
      â”‚
      â”‚1
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  questions â”‚â”€â”€â”€1:Nâ”€â”€â”‚question_   â”‚       â”‚question_   â”‚
â”‚   é¢˜ç›®è¡¨    â”‚       â”‚options     â”‚       â”‚sets        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  é€‰é¡¹è¡¨     â”‚       â”‚ ç»ƒä¹ é›†è¡¨    â”‚
      â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                          â”‚
      â”‚                                          â”‚
      â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚user_answersâ”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ ç­”é¢˜è®°å½•è¡¨  â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 æ ¸å¿ƒè¡¨ç»“æ„æ±‡æ€»

#### ç”¨æˆ·ç›¸å…³ï¼ˆ3å¼ è¡¨ï¼‰
- `users` - ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
- `user_profiles` - ç”¨æˆ·è¯¦ç»†èµ„æ–™
- `user_achievements` - ç”¨æˆ·æˆå°±

#### è¯¾ç¨‹ç›¸å…³ï¼ˆ4å¼ è¡¨ï¼‰
- `subjects` - å­¦ç§‘
- `chapters` - ç« èŠ‚
- `lessons` - è¯¾æ—¶
- `user_learning_progress` - å­¦ä¹ è¿›åº¦

#### é¢˜åº“ç›¸å…³ï¼ˆ5å¼ è¡¨ï¼‰
- `questions` - é¢˜ç›®
- `question_options` - é€‰é¡¹
- `question_sets` - ç»ƒä¹ é›†
- `user_answers` - ç­”é¢˜è®°å½•
- `wrong_questions` - é”™é¢˜æœ¬

#### ç¤¾åŒºç›¸å…³ï¼ˆ4å¼ è¡¨ï¼‰
- `posts` - å¸–å­
- `comments` - è¯„è®º
- `post_likes` - ç‚¹èµ
- `post_favorites` - æ”¶è—

#### ç»Ÿè®¡ç›¸å…³ï¼ˆ4å¼ è¡¨ï¼‰
- `daily_stats` - æ¯æ—¥ç»Ÿè®¡
- `subject_stats` - å­¦ç§‘ç»Ÿè®¡
- `chapter_mastery` - ç« èŠ‚æŒæ¡åº¦
- `rankings` - æ’è¡Œæ¦œ

#### æˆé•¿ç›¸å…³ï¼ˆ4å¼ è¡¨ï¼‰
- `user_levels` - ç”¨æˆ·ç­‰çº§
- `achievements` - æˆå°±å®šä¹‰
- `user_achievements` - ç”¨æˆ·æˆå°±è®°å½•
- `user_checkins` - å­¦ä¹ æ‰“å¡

**æ€»è®¡ï¼šçº¦ 25 å¼ æ ¸å¿ƒè¡¨**

---

### 4.3 ç´¢å¼•è®¾è®¡

#### é«˜é¢‘æŸ¥è¯¢ç´¢å¼•
```sql
-- ç”¨æˆ·è¡¨
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_phone ON users(phone);
CREATE INDEX idx_users_role ON users(role);

-- å­¦ä¹ è¿›åº¦è¡¨
CREATE INDEX idx_progress_user_lesson ON user_learning_progress(user_id, lesson_id);
CREATE INDEX idx_progress_user ON user_learning_progress(user_id);

-- ç­”é¢˜è®°å½•è¡¨
CREATE INDEX idx_answers_user_question ON user_answers(user_id, question_id);
CREATE INDEX idx_answers_user ON user_answers(user_id);
CREATE INDEX idx_answers_created ON user_answers(created_at);

-- å¸–å­è¡¨
CREATE INDEX idx_posts_user ON posts(user_id);
CREATE INDEX idx_posts_subject ON posts(subject_id);
CREATE INDEX idx_posts_hot ON posts(is_hot);
CREATE INDEX idx_posts_created ON posts(created_at);

-- è¯„è®ºè¡¨
CREATE INDEX idx_comments_post ON comments(post_id);
CREATE INDEX idx_comments_user ON comments(user_id);

-- æ¯æ—¥ç»Ÿè®¡è¡¨
CREATE INDEX idx_daily_stats_user_date ON daily_stats(user_id, date);
```

---

### 4.4 åˆ†åº“åˆ†è¡¨ç­–ç•¥ï¼ˆå¤§è§„æ¨¡åœºæ™¯ï¼‰

å½“æ•°æ®é‡è¶…è¿‡ 1000 ä¸‡æ¡æ—¶ï¼Œéœ€è¦è€ƒè™‘åˆ†åº“åˆ†è¡¨ï¼š

#### åˆ†è¡¨ç­–ç•¥
```yaml
ç­”é¢˜è®°å½•è¡¨ (user_answers):
  åˆ†è¡¨æ–¹å¼: æŒ‰ç”¨æˆ· ID å“ˆå¸Œåˆ†è¡¨
  åˆ†è¡¨æ•°é‡: 16 æˆ– 32 å¼ 
  å‘½åè§„åˆ™: user_answers_0, user_answers_1, ...

  ç¤ºä¾‹ï¼š
  user_id = 12345
  table_index = 12345 % 16 = 9
  è¡¨å = user_answers_9

å­¦ä¹ è¿›åº¦è¡¨ (user_learning_progress):
  åˆ†è¡¨æ–¹å¼: æŒ‰ç”¨æˆ· ID å“ˆå¸Œåˆ†è¡¨
  åˆ†è¡¨æ•°é‡: 16 å¼ 

æ¯æ—¥ç»Ÿè®¡è¡¨ (daily_stats):
  åˆ†è¡¨æ–¹å¼: æŒ‰æ—¶é—´èŒƒå›´åˆ†è¡¨ï¼ˆæŒ‰æœˆï¼‰
  å‘½åè§„åˆ™: daily_stats_202401, daily_stats_202402, ...
```

#### åˆ†åº“ç­–ç•¥ï¼ˆè¶…å¤§è§„æ¨¡ï¼‰
```yaml
ç”¨æˆ·é‡è¶…è¿‡ 100 ä¸‡æ—¶:
  - ç”¨æˆ·åº“ï¼ˆç”¨æˆ·ç›¸å…³è¡¨ï¼‰
  - è¯¾ç¨‹åº“ï¼ˆè¯¾ç¨‹ç›¸å…³è¡¨ï¼‰
  - é¢˜åº“ï¼ˆé¢˜ç›®ç›¸å…³è¡¨ï¼‰
  - ç»Ÿè®¡åº“ï¼ˆç»Ÿè®¡ç›¸å…³è¡¨ï¼‰
```

---

## 5. API æ¥å£è®¾è®¡

### 5.1 RESTful API è®¾è®¡è§„èŒƒ

#### åŸºç¡€è§„åˆ™
```
- ä½¿ç”¨åè¯å¤æ•°ï¼š/api/users, /api/courses
- HTTP æ–¹æ³•è¯­ä¹‰åŒ–ï¼š
  - GET: è·å–èµ„æº
  - POST: åˆ›å»ºèµ„æº
  - PUT: æ›´æ–°èµ„æºï¼ˆå…¨é‡ï¼‰
  - PATCH: æ›´æ–°èµ„æºï¼ˆéƒ¨åˆ†ï¼‰
  - DELETE: åˆ é™¤èµ„æº
- ç‰ˆæœ¬æ§åˆ¶ï¼š/api/v1/users
- ç»Ÿä¸€å“åº”æ ¼å¼
```

#### ç»Ÿä¸€å“åº”æ ¼å¼
```typescript
// æˆåŠŸå“åº”
{
  "success": true,
  "data": {
    // æ•°æ®å†…å®¹
  },
  "message": "æ“ä½œæˆåŠŸ",
  "timestamp": 1640000000000
}

// å¤±è´¥å“åº”
{
  "success": false,
  "error": {
    "code": "USER_NOT_FOUND",
    "message": "ç”¨æˆ·ä¸å­˜åœ¨"
  },
  "timestamp": 1640000000000
}

// åˆ†é¡µå“åº”
{
  "success": true,
  "data": {
    "items": [],
    "pagination": {
      "page": 1,
      "pageSize": 20,
      "total": 100,
      "totalPages": 5
    }
  }
}
```

---

### 5.2 æ ¸å¿ƒ API æ¥å£åˆ—è¡¨

#### ç”¨æˆ·æ¨¡å—
```yaml
POST   /api/auth/register           # ç”¨æˆ·æ³¨å†Œ
POST   /api/auth/login              # ç”¨æˆ·ç™»å½•
POST   /api/auth/logout             # ç”¨æˆ·ç™»å‡º
POST   /api/auth/refresh            # åˆ·æ–° token
POST   /api/auth/send-code          # å‘é€éªŒè¯ç 
POST   /api/auth/reset-password     # é‡ç½®å¯†ç 

GET    /api/users/me                # è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
PUT    /api/users/me                # æ›´æ–°ç”¨æˆ·ä¿¡æ¯
PUT    /api/users/password          # ä¿®æ”¹å¯†ç 
POST   /api/users/avatar            # ä¸Šä¼ å¤´åƒ
```

#### è¯¾ç¨‹æ¨¡å—
```yaml
GET    /api/subjects                # è·å–æ‰€æœ‰å­¦ç§‘
GET    /api/subjects/:id            # è·å–å­¦ç§‘è¯¦æƒ…
GET    /api/subjects/:id/chapters   # è·å–å­¦ç§‘ç« èŠ‚åˆ—è¡¨
GET    /api/chapters/:id            # è·å–ç« èŠ‚è¯¦æƒ…
GET    /api/chapters/:id/lessons    # è·å–ç« èŠ‚è¯¾æ—¶åˆ—è¡¨
GET    /api/lessons/:id             # è·å–è¯¾æ—¶è¯¦æƒ…
GET    /api/lessons/:id/video-url   # è·å–è§†é¢‘æ’­æ”¾åœ°å€

POST   /api/learning/progress       # æ›´æ–°å­¦ä¹ è¿›åº¦
GET    /api/learning/progress       # è·å–å­¦ä¹ è¿›åº¦
GET    /api/learning/recent         # è·å–æœ€è¿‘å­¦ä¹ è®°å½•
```

#### é¢˜åº“æ¨¡å—
```yaml
GET    /api/questions               # è·å–é¢˜ç›®åˆ—è¡¨ï¼ˆæ”¯æŒç­›é€‰ï¼‰
  æŸ¥è¯¢å‚æ•°:
    - subject_id: å­¦ç§‘ID
    - chapter_id: ç« èŠ‚ID
    - difficulty: éš¾åº¦
    - type: é¢˜å‹
    - page: é¡µç 
    - page_size: æ¯é¡µæ•°é‡

GET    /api/questions/:id           # è·å–é¢˜ç›®è¯¦æƒ…
GET    /api/question-sets           # è·å–ç»ƒä¹ é›†åˆ—è¡¨
GET    /api/question-sets/:id       # è·å–ç»ƒä¹ é›†è¯¦æƒ…
POST   /api/answers                 # æäº¤ç­”æ¡ˆ
GET    /api/answers/stats           # è·å–ç­”é¢˜ç»Ÿè®¡
GET    /api/answers/report/:id      # è·å–ç­”é¢˜æŠ¥å‘Š
GET    /api/wrong-questions         # è·å–é”™é¢˜æœ¬
POST   /api/wrong-questions/:id/master  # æ ‡è®°é¢˜ç›®å·²æŒæ¡
```

#### è®¨è®ºæ¨¡å—
```yaml
GET    /api/posts                   # è·å–å¸–å­åˆ—è¡¨
  æŸ¥è¯¢å‚æ•°:
    - subject_id: å­¦ç§‘ID
    - sort: æ’åºæ–¹å¼ï¼ˆhot, newï¼‰
    - keyword: æœç´¢å…³é”®è¯
    - page: é¡µç 

POST   /api/posts                   # å‘å¸ƒå¸–å­
GET    /api/posts/:id               # è·å–å¸–å­è¯¦æƒ…
PUT    /api/posts/:id               # ç¼–è¾‘å¸–å­
DELETE /api/posts/:id               # åˆ é™¤å¸–å­

GET    /api/posts/:id/comments      # è·å–å¸–å­è¯„è®º
POST   /api/posts/:id/comments      # å‘è¡¨è¯„è®º
POST   /api/posts/:id/like          # ç‚¹èµå¸–å­
DELETE /api/posts/:id/like          # å–æ¶ˆç‚¹èµ
POST   /api/posts/:id/favorite      # æ”¶è—å¸–å­
DELETE /api/posts/:id/favorite      # å–æ¶ˆæ”¶è—

GET    /api/search/posts            # æœç´¢å¸–å­
```

#### ç»Ÿè®¡æ¨¡å—
```yaml
GET    /api/stats/overview          # é¦–é¡µæ¦‚è§ˆç»Ÿè®¡
  è¿”å›æ•°æ®:
    - today_study_time: ä»Šæ—¥å­¦ä¹ æ—¶é•¿
    - week_questions_count: æœ¬å‘¨å®Œæˆé¢˜ç›®æ•°
    - total_badges: ç´¯è®¡å‹‹ç« æ•°
    - progress_rank: è¿›æ­¥æ’å

GET    /api/stats/today-tasks       # è·å–ä»Šæ—¥ä»»åŠ¡
GET    /api/stats/performance       # è·å–å­¦ä¹ æˆç»©ç»Ÿè®¡
GET    /api/stats/weekly-chart      # è·å–æ¯å‘¨å­¦ä¹ æ—¶é•¿å›¾è¡¨
GET    /api/stats/score-trend       # è·å–æˆç»©è¶‹åŠ¿å›¾è¡¨
GET    /api/stats/subject/:id/chapters  # è·å–å­¦ç§‘ç« èŠ‚æŒæ¡åº¦
```

#### æˆé•¿æ¨¡å—
```yaml
GET    /api/growth/level            # è·å–ç”¨æˆ·ç­‰çº§ä¿¡æ¯
GET    /api/growth/achievements     # è·å–æˆå°±åˆ—è¡¨
POST   /api/growth/checkin          # å­¦ä¹ æ‰“å¡
GET    /api/growth/streak           # è·å–è¿ç»­å­¦ä¹ å¤©æ•°

GET    /api/rankings                # è·å–æ’è¡Œæ¦œ
  æŸ¥è¯¢å‚æ•°:
    - type: æ’åç±»å‹ï¼ˆclass, grade, subjectï¼‰
    - subject_id: å­¦ç§‘IDï¼ˆå¯é€‰ï¼‰
    - period: æ—¶é—´èŒƒå›´ï¼ˆweek, monthï¼‰
    - limit: è¿”å›æ•°é‡
```

#### é€šçŸ¥æ¨¡å—
```yaml
GET    /api/notifications           # è·å–é€šçŸ¥åˆ—è¡¨
PUT    /api/notifications/:id/read  # æ ‡è®°é€šçŸ¥å·²è¯»
PUT    /api/notifications/read-all  # æ ‡è®°å…¨éƒ¨å·²è¯»
```

---

### 5.3 API è®¤è¯ä¸é‰´æƒ

#### JWT Token æ–¹æ¡ˆ
```typescript
// Access Token (çŸ­æœŸï¼Œ1å°æ—¶)
{
  "userId": 12345,
  "role": "student",
  "exp": 1640000000
}

// Refresh Token (é•¿æœŸï¼Œ7å¤©)
{
  "userId": 12345,
  "tokenId": "uuid",
  "exp": 1640604800
}
```

#### è¯·æ±‚å¤´æ ¼å¼
```
Authorization: Bearer <access_token>
```

#### Token åˆ·æ–°æµç¨‹
```
1. Access Token è¿‡æœŸ
2. å‰ç«¯ä½¿ç”¨ Refresh Token è¯·æ±‚ /api/auth/refresh
3. åç«¯éªŒè¯ Refresh Tokenï¼Œè¿”å›æ–°çš„ Access Token
4. å‰ç«¯æ›´æ–° Tokenï¼Œé‡è¯•åŸè¯·æ±‚
```

---

### 5.4 API é™æµç­–ç•¥

```yaml
æ™®é€šæ¥å£:
  - é™åˆ¶: 100 æ¬¡/åˆ†é’Ÿ/IP
  - è¶…å‡ºå: è¿”å› 429 Too Many Requests

ç™»å½•æ¥å£:
  - é™åˆ¶: 5 æ¬¡/åˆ†é’Ÿ/IP
  - è¶…å‡ºå: éœ€è¦éªŒè¯ç 

å‘é€éªŒè¯ç :
  - é™åˆ¶: 1 æ¬¡/åˆ†é’Ÿ/æ‰‹æœºå·
  - é™åˆ¶: 10 æ¬¡/å°æ—¶/æ‰‹æœºå·

ç­”é¢˜æäº¤:
  - é™åˆ¶: 200 æ¬¡/åˆ†é’Ÿ/ç”¨æˆ·
  - é˜²æ­¢ä½œå¼Š

æœç´¢æ¥å£:
  - é™åˆ¶: 30 æ¬¡/åˆ†é’Ÿ/ç”¨æˆ·
  - é˜²æ­¢çˆ¬è™«
```

---

## 6. å¼€å‘è·¯çº¿å›¾

### 6.1 é¡¹ç›®å‡†å¤‡é˜¶æ®µï¼ˆWeek 0-1ï¼‰

#### Week 0: å›¢é˜Ÿç»„å»ºä¸ç¯å¢ƒå‡†å¤‡
- [ ] å›¢é˜Ÿæˆå‘˜åˆ°ä½ï¼ˆäº§å“ã€å‰ç«¯Ã—2ã€åç«¯Ã—2ã€UIã€æµ‹è¯•ï¼‰
- [ ] å¼€å‘ç¯å¢ƒæ­å»ºï¼ˆç”µè„‘ã€è½¯ä»¶ã€è´¦å·ï¼‰
- [ ] åä½œå·¥å…·é…ç½®ï¼ˆGitã€é¡¹ç›®ç®¡ç†å·¥å…·ï¼‰
- [ ] æŠ€æœ¯é€‰å‹ç¡®è®¤
- [ ] åˆ¶å®šå¼€å‘è§„èŒƒï¼ˆä»£ç è§„èŒƒã€Git è§„èŒƒã€å‘½åè§„èŒƒï¼‰

#### Week 1: æŠ€æœ¯æ¶æ„æ­å»º
- [ ] åˆ›å»º Git ä»“åº“ï¼ˆMonorepo / å¤šä»“åº“ï¼‰
- [ ] å‰ç«¯é¡¹ç›®åˆå§‹åŒ–ï¼ˆReact + Vite + TypeScriptï¼‰
- [ ] åç«¯é¡¹ç›®åˆå§‹åŒ–ï¼ˆNestJS + Prismaï¼‰
- [ ] é…ç½® ESLintã€Prettierã€Husky
- [ ] é…ç½® CI/CD æµæ°´çº¿
- [ ] æ•°æ®åº“è®¾è®¡ï¼ˆERå›¾ã€è¡¨ç»“æ„ï¼‰
- [ ] è´­ä¹°åŸŸåã€äº‘æœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰

---

### 6.2 MVP é˜¶æ®µï¼ˆWeek 2-8ï¼Œçº¦2ä¸ªæœˆï¼‰

#### Week 2-3: ç”¨æˆ·ç³»ç»Ÿ + åŸºç¡€æ¶æ„

**åç«¯å¼€å‘ä»»åŠ¡**
- [ ] é¡¹ç›®ç»“æ„æ­å»ºï¼ˆæ¨¡å—åŒ–è®¾è®¡ï¼‰
- [ ] æ•°æ®åº“è¿æ¥é…ç½®ï¼ˆPostgreSQL + Prismaï¼‰
- [ ] Redis è¿æ¥é…ç½®
- [ ] ç”¨æˆ·æ³¨å†Œ API
  - [ ] æ‰‹æœºå·/é‚®ç®±éªŒè¯
  - [ ] å¯†ç åŠ å¯†ï¼ˆbcryptï¼‰
  - [ ] éªŒè¯ç å‘é€ï¼ˆé˜¿é‡Œäº‘çŸ­ä¿¡ï¼‰
- [ ] ç”¨æˆ·ç™»å½• API
  - [ ] JWT token ç”Ÿæˆ
  - [ ] Refresh token æœºåˆ¶
  - [ ] Redis å­˜å‚¨ session
- [ ] ç”¨æˆ·ä¿¡æ¯ç®¡ç† API
  - [ ] è·å–/æ›´æ–°ç”¨æˆ·ä¿¡æ¯
  - [ ] å¤´åƒä¸Šä¼ ï¼ˆOSSï¼‰
- [ ] æƒé™ç³»ç»Ÿï¼ˆRBACï¼‰
- [ ] ç»Ÿä¸€å¼‚å¸¸å¤„ç†
- [ ] ç»Ÿä¸€å“åº”æ ¼å¼
- [ ] API æ—¥å¿—è®°å½•
- [ ] Swagger API æ–‡æ¡£

**å‰ç«¯å¼€å‘ä»»åŠ¡**
- [ ] è·¯ç”±é…ç½®ï¼ˆReact Routerï¼‰
- [ ] çŠ¶æ€ç®¡ç†é…ç½®ï¼ˆZustandï¼‰
- [ ] API è¯·æ±‚å°è£…ï¼ˆAxios + React Queryï¼‰
- [ ] ç™»å½•é¡µé¢
  - [ ] æ‰‹æœºå·/é‚®ç®±ç™»å½•
  - [ ] éªŒè¯ç ç™»å½•
  - [ ] è¡¨å•éªŒè¯ï¼ˆZodï¼‰
- [ ] æ³¨å†Œé¡µé¢
- [ ] ç”¨æˆ·ä¿¡æ¯é¡µé¢
- [ ] å…¨å±€çŠ¶æ€ç®¡ç†
  - [ ] ç”¨æˆ·çŠ¶æ€
  - [ ] Token ç®¡ç†
  - [ ] ä¸»é¢˜åˆ‡æ¢
  - [ ] è¯­è¨€åˆ‡æ¢
- [ ] è·¯ç”±å®ˆå«ï¼ˆç™»å½•éªŒè¯ï¼‰
- [ ] 404 é¡µé¢

**æµ‹è¯•ä¸éƒ¨ç½²**
- [ ] å•å…ƒæµ‹è¯•ï¼ˆJestï¼‰
- [ ] éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ
- [ ] å†…éƒ¨æµ‹è¯•

**é‡Œç¨‹ç¢‘ï¼šWeek 3 å®Œæˆå¯æ³¨å†Œç™»å½•çš„ Demo**

---

#### Week 4-5: è¯¾ç¨‹å­¦ä¹ æ¨¡å—

**åç«¯å¼€å‘ä»»åŠ¡**
- [ ] è¯¾ç¨‹æ•°æ®è¡¨è®¾è®¡ä¸åˆ›å»º
  - [ ] subjectsï¼ˆå­¦ç§‘è¡¨ï¼‰
  - [ ] chaptersï¼ˆç« èŠ‚è¡¨ï¼‰
  - [ ] lessonsï¼ˆè¯¾æ—¶è¡¨ï¼‰
  - [ ] user_learning_progressï¼ˆå­¦ä¹ è¿›åº¦è¡¨ï¼‰
- [ ] è¯¾ç¨‹ç®¡ç† API
  - [ ] è·å–å­¦ç§‘åˆ—è¡¨
  - [ ] è·å–ç« èŠ‚åˆ—è¡¨
  - [ ] è·å–è¯¾æ—¶åˆ—è¡¨
  - [ ] è·å–è¯¾æ—¶è¯¦æƒ…
- [ ] å­¦ä¹ è¿›åº¦ API
  - [ ] è®°å½•å­¦ä¹ è¿›åº¦
  - [ ] è·å–å­¦ä¹ è¿›åº¦
  - [ ] è¯¾ç¨‹è§£é”é€»è¾‘
- [ ] è§†é¢‘æœåŠ¡
  - [ ] OSS é…ç½®
  - [ ] è§†é¢‘ä¸Šä¼ æ¥å£
  - [ ] é˜²ç›—é“¾ç­¾å URL ç”Ÿæˆ

**å‰ç«¯å¼€å‘ä»»åŠ¡**
- [ ] å­¦ä¹ é¡µé¢å¼€å‘
  - [ ] ç§‘ç›®é€‰æ‹©æ ‡ç­¾ï¼ˆTabsï¼‰
  - [ ] ç« èŠ‚åˆ—è¡¨ï¼ˆAccordionï¼‰
  - [ ] è¯¾æ—¶åˆ—è¡¨
  - [ ] è¿›åº¦æ¡æ˜¾ç¤º
  - [ ] é”å®š/è§£é”çŠ¶æ€
- [ ] è§†é¢‘æ’­æ”¾å™¨é›†æˆ
  - [ ] Video.js / Plyr
  - [ ] æ’­æ”¾è¿›åº¦è®°å½•
  - [ ] å€é€Ÿæ’­æ”¾
  - [ ] å…¨å±åŠŸèƒ½
  - [ ] æ–­ç‚¹ç»­æ’­
- [ ] å­¦ä¹ ç»Ÿè®¡ç»„ä»¶

**æ•°æ®å‡†å¤‡**
- [ ] å‡†å¤‡ 6 ä¸ªå­¦ç§‘çš„è¯¾ç¨‹æ•°æ®
- [ ] æ¯ä¸ªå­¦ç§‘ 3-4 ä¸ªç« èŠ‚
- [ ] æ¯ä¸ªç« èŠ‚ 4-5 ä¸ªè¯¾æ—¶
- [ ] å‡†å¤‡æµ‹è¯•è§†é¢‘

**é‡Œç¨‹ç¢‘ï¼šWeek 5 å®Œæˆå¯è§‚çœ‹è§†é¢‘ã€è®°å½•è¿›åº¦çš„ç‰ˆæœ¬**

---

#### Week 6-7: é¢˜åº“ç»ƒä¹ æ¨¡å—

**åç«¯å¼€å‘ä»»åŠ¡**
- [ ] é¢˜åº“æ•°æ®è¡¨è®¾è®¡
  - [ ] questionsï¼ˆé¢˜ç›®è¡¨ï¼‰
  - [ ] question_optionsï¼ˆé€‰é¡¹è¡¨ï¼‰
  - [ ] question_setsï¼ˆç»ƒä¹ é›†è¡¨ï¼‰
  - [ ] user_answersï¼ˆç­”é¢˜è®°å½•è¡¨ï¼‰
  - [ ] wrong_questionsï¼ˆé”™é¢˜æœ¬è¡¨ï¼‰
- [ ] é¢˜åº“ç®¡ç† API
  - [ ] è·å–é¢˜ç›®åˆ—è¡¨ï¼ˆæ”¯æŒç­›é€‰ï¼‰
  - [ ] è·å–ç»ƒä¹ é›†
  - [ ] æäº¤ç­”æ¡ˆï¼ˆè‡ªåŠ¨æ‰¹æ”¹ï¼‰
  - [ ] è·å–ç­”é¢˜ç»Ÿè®¡
  - [ ] é”™é¢˜æœ¬ç®¡ç†
- [ ] ç­”é¢˜æŠ¥å‘Šç”Ÿæˆé€»è¾‘

**å‰ç«¯å¼€å‘ä»»åŠ¡**
- [ ] é¢˜åº“é¡µé¢å¼€å‘
  - [ ] ç§‘ç›®ç»Ÿè®¡å¡ç‰‡
  - [ ] ç»ƒä¹ é›†ç­›é€‰å™¨
  - [ ] ç»ƒä¹ é›†åˆ—è¡¨
  - [ ] å®ŒæˆçŠ¶æ€æ ‡è®°
- [ ] ç­”é¢˜é¡µé¢
  - [ ] é¢˜ç›®å±•ç¤º
  - [ ] å•é€‰/å¤šé€‰/åˆ¤æ–­é¢˜ç»„ä»¶
  - [ ] å€’è®¡æ—¶åŠŸèƒ½
  - [ ] ç­”é¢˜å¡
  - [ ] äº¤å·ç¡®è®¤
- [ ] ç­”é¢˜æŠ¥å‘Šé¡µé¢
- [ ] é”™é¢˜æœ¬é¡µé¢

**æ•°æ®å‡†å¤‡**
- [ ] å‡†å¤‡ 500+ é¢˜ç›®
- [ ] æ¯ä¸ªå­¦ç§‘ 80-100 é¢˜
- [ ] é…ç½®æ ‡å‡†ç­”æ¡ˆå’Œè§£æ

**é‡Œç¨‹ç¢‘ï¼šWeek 7 å®Œæˆå¯åšé¢˜ã€æŸ¥çœ‹æŠ¥å‘Šçš„ç‰ˆæœ¬**

---

#### Week 8: é¦–é¡µæ•°æ®ç»Ÿè®¡

**åç«¯å¼€å‘ä»»åŠ¡**
- [ ] ç»Ÿè®¡æ•°æ®è¡¨è®¾è®¡
  - [ ] daily_statsï¼ˆæ¯æ—¥ç»Ÿè®¡ï¼‰
  - [ ] subject_statsï¼ˆå­¦ç§‘ç»Ÿè®¡ï¼‰
  - [ ] chapter_masteryï¼ˆç« èŠ‚æŒæ¡åº¦ï¼‰
- [ ] ç»Ÿè®¡æ•°æ® API
  - [ ] é¦–é¡µæ¦‚è§ˆæ•°æ®
  - [ ] ä»Šæ—¥ä»»åŠ¡åˆ—è¡¨
  - [ ] å­¦ä¹ æˆç»©ç»Ÿè®¡
  - [ ] ç§‘ç›®ç« èŠ‚æŒæ¡åº¦
- [ ] å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å¤©å‡Œæ™¨ç»Ÿè®¡ï¼‰
- [ ] Redis ç¼“å­˜ä¼˜åŒ–

**å‰ç«¯å¼€å‘ä»»åŠ¡**
- [ ] é¦–é¡µå¼€å‘
  - [ ] æ¬¢è¿æ¨ªå¹…
  - [ ] ç»Ÿè®¡å¡ç‰‡ï¼ˆ4ä¸ªï¼‰
  - [ ] ä»Šæ—¥ä»»åŠ¡è¿›åº¦æ¡
  - [ ] åœ†å½¢è¿›åº¦å›¾ï¼ˆRechartsï¼‰
  - [ ] ç§‘ç›®ç« èŠ‚æŒæ¡åº¦

**é‡Œç¨‹ç¢‘ï¼šWeek 8 å®Œæˆ MVP ç‰ˆæœ¬ï¼Œå†…éƒ¨æµ‹è¯•**

---

### 6.3 V1.0 é˜¶æ®µï¼ˆWeek 9-16ï¼Œçº¦2ä¸ªæœˆï¼‰

#### Week 9-10: è®¨è®ºåŒºæ¨¡å—

**åç«¯å¼€å‘ä»»åŠ¡**
- [ ] è®¨è®ºåŒºæ•°æ®è¡¨è®¾è®¡
  - [ ] postsï¼ˆå¸–å­è¡¨ï¼‰
  - [ ] commentsï¼ˆè¯„è®ºè¡¨ï¼‰
  - [ ] post_likesï¼ˆç‚¹èµè¡¨ï¼‰
- [ ] è®¨è®ºåŒº API
  - [ ] å‘å¸ƒå¸–å­
  - [ ] è·å–å¸–å­åˆ—è¡¨ï¼ˆåˆ†é¡µã€æ’åºï¼‰
  - [ ] è·å–å¸–å­è¯¦æƒ…
  - [ ] å‘è¡¨è¯„è®º
  - [ ] ç‚¹èµ/å–æ¶ˆç‚¹èµ
  - [ ] æœç´¢å¸–å­
- [ ] æ¶ˆæ¯é€šçŸ¥ç³»ç»Ÿ
  - [ ] è¯„è®ºé€šçŸ¥
  - [ ] ç‚¹èµé€šçŸ¥

**å‰ç«¯å¼€å‘ä»»åŠ¡**
- [ ] è®¨è®ºåŒºé¡µé¢
  - [ ] ç»Ÿè®¡å¡ç‰‡
  - [ ] æœç´¢æ¡†
  - [ ] ç­›é€‰å™¨
  - [ ] å¸–å­åˆ—è¡¨
  - [ ] å‘å¸ƒå¸–å­å¼¹çª—
- [ ] å¸–å­è¯¦æƒ…é¡µ
- [ ] è¯„è®ºç»„ä»¶
- [ ] å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆTiptapï¼‰

---

#### Week 11-12: æˆé•¿ç³»ç»Ÿæ¨¡å—

**åç«¯å¼€å‘ä»»åŠ¡**
- [ ] æˆé•¿ç³»ç»Ÿæ•°æ®è¡¨è®¾è®¡
  - [ ] user_levelsï¼ˆç­‰çº§è¡¨ï¼‰
  - [ ] achievementsï¼ˆæˆå°±è¡¨ï¼‰
  - [ ] user_achievementsï¼ˆç”¨æˆ·æˆå°±è¡¨ï¼‰
  - [ ] rankingsï¼ˆæ’è¡Œæ¦œè¡¨ï¼‰
  - [ ] user_checkinsï¼ˆæ‰“å¡è¡¨ï¼‰
- [ ] æˆé•¿ç³»ç»Ÿ API
  - [ ] è·å–ç”¨æˆ·ç­‰çº§
  - [ ] è·å–æˆå°±åˆ—è¡¨
  - [ ] è§£é”æˆå°±
  - [ ] å­¦ä¹ æ‰“å¡
  - [ ] è·å–æ’è¡Œæ¦œ
- [ ] æ’è¡Œæ¦œå®ç°ï¼ˆRedis Sorted Setï¼‰

**å‰ç«¯å¼€å‘ä»»åŠ¡**
- [ ] æˆé•¿é¡µé¢
  - [ ] æˆé•¿æ¦‚è§ˆå¡ç‰‡
  - [ ] å­¦ä¹ æ•°æ®å›¾è¡¨
  - [ ] ç§‘ç›®è¿›åº¦å±•ç¤º
  - [ ] æˆå°±ç³»ç»Ÿ
  - [ ] æ’è¡Œæ¦œ

---

#### Week 13: ç”¨æˆ·ä¸­å¿ƒå®Œå–„

**åç«¯å¼€å‘ä»»åŠ¡**
- [ ] ç”¨æˆ·è®¾ç½® API
  - [ ] ä¿®æ”¹å¯†ç 
  - [ ] ç»‘å®šé‚®ç®±/æ‰‹æœº
  - [ ] é€šçŸ¥è®¾ç½®
  - [ ] å­¦ä¹ åå¥½è®¾ç½®

**å‰ç«¯å¼€å‘ä»»åŠ¡**
- [ ] ç”¨æˆ·ä¸­å¿ƒé¡µé¢
  - [ ] åŸºæœ¬èµ„æ–™ Tab
  - [ ] å­¦ä¹ è®¾ç½® Tab
  - [ ] é€šçŸ¥è®¾ç½® Tab
  - [ ] å®‰å…¨è®¾ç½® Tab

---

#### Week 14-15: æ€§èƒ½ä¼˜åŒ–ä¸å®Œå–„

**åç«¯ä¼˜åŒ–**
- [ ] æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
- [ ] SQL æŸ¥è¯¢ä¼˜åŒ–
- [ ] Redis ç¼“å­˜ç­–ç•¥
- [ ] API å“åº”æ—¶é—´ä¼˜åŒ–ï¼ˆ<200msï¼‰
- [ ] å®‰å…¨åŠ å›º
  - [ ] SQL æ³¨å…¥é˜²æŠ¤
  - [ ] XSS é˜²æŠ¤
  - [ ] CSRF é˜²æŠ¤
  - [ ] API é™æµ

**å‰ç«¯ä¼˜åŒ–**
- [ ] ä»£ç åˆ†å‰²ï¼ˆReact.lazyï¼‰
- [ ] å›¾ç‰‡æ‡’åŠ è½½
- [ ] Bundle å¤§å°ä¼˜åŒ–
- [ ] Loading çŠ¶æ€ä¼˜åŒ–
- [ ] Skeleton åŠ è½½æ•ˆæœ
- [ ] é”™è¯¯è¾¹ç•Œ
- [ ] å“åº”å¼é€‚é…æµ‹è¯•

**æµ‹è¯•**
- [ ] å•å…ƒæµ‹è¯•ï¼ˆè¦†ç›–ç‡ >80%ï¼‰
- [ ] é›†æˆæµ‹è¯•
- [ ] E2E æµ‹è¯•ï¼ˆPlaywrightï¼‰
- [ ] æ€§èƒ½æµ‹è¯•ï¼ˆJMeterï¼‰
- [ ] å®‰å…¨æµ‹è¯•

---

#### Week 16: éƒ¨ç½²ä¸Šçº¿

**éƒ¨ç½²å‡†å¤‡**
- [ ] è´­ä¹°åŸŸå
- [ ] é…ç½® SSL è¯ä¹¦
- [ ] é…ç½® CDN
- [ ] è´­ä¹°äº‘æœåŠ¡å™¨

**ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²**
- [ ] Docker å®¹å™¨åŒ–
- [ ] å‰ç«¯éƒ¨ç½²ï¼ˆVercelï¼‰
- [ ] åç«¯éƒ¨ç½²ï¼ˆé˜¿é‡Œäº‘ï¼‰
- [ ] æ•°æ®åº“éƒ¨ç½²ï¼ˆRDSï¼‰
- [ ] Redis éƒ¨ç½²

**ç›‘æ§ä¸å‘Šè­¦**
- [ ] Sentry é”™è¯¯ç›‘æ§
- [ ] Google Analytics
- [ ] æ—¥å¿—æ”¶é›†ï¼ˆELKï¼‰
- [ ] æ€§èƒ½ç›‘æ§ï¼ˆPrometheusï¼‰

**é‡Œç¨‹ç¢‘ï¼šWeek 16 æ­£å¼ä¸Šçº¿ V1.0**

---

### 6.4 V2.0 é˜¶æ®µï¼ˆåç»­è¿­ä»£ï¼‰

#### åŠŸèƒ½è¿­ä»£æ¸…å•
1. **AI æ™ºèƒ½æ¨èç³»ç»Ÿ**
   - ä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„
   - æ™ºèƒ½é¢˜ç›®æ¨è
   - è–„å¼±çŸ¥è¯†ç‚¹è¯†åˆ«

2. **æ™ºèƒ½æ‰¹æ”¹ç³»ç»Ÿ**
   - ä¸»è§‚é¢˜ AI æ‰¹æ”¹
   - ä½œæ–‡æ‰¹æ”¹ä¸è¯„åˆ†

3. **ç›´æ’­è¯¾ç¨‹**
   - ç›´æ’­ç³»ç»Ÿæ­å»º
   - ç›´æ’­é—´äº’åŠ¨
   - ç›´æ’­å›æ”¾

4. **åœ¨çº¿ç­”ç–‘**
   - å®æ—¶èŠå¤©ï¼ˆWebSocketï¼‰
   - ä¸€å¯¹ä¸€è¾…å¯¼
   - è¯­éŸ³/è§†é¢‘é€šè¯

5. **å®¶é•¿ç«¯**
   - å®¶é•¿è´¦å·ç³»ç»Ÿ
   - å­¦ä¹ æŠ¥å‘Šæ¨é€
   - æˆç»©åˆ†æ

6. **ç¤¾åŒºåŒ–åŠŸèƒ½**
   - å­¦ä¹ å°ç»„
   - åŒå­¦å…³æ³¨
   - å­¦ä¹ åŠ¨æ€

7. **æ¸¸æˆåŒ–å…ƒç´ **
   - ç§¯åˆ†ç³»ç»Ÿ
   - è™šæ‹Ÿè´§å¸
   - PK ç«èµ›æ¨¡å¼

8. **ç§»åŠ¨ç«¯ App**
   - React Native å¼€å‘
   - iOS/Android ç‰ˆæœ¬

---

## 7. æŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ

### 7.1 å­¦ä¹ è¿›åº¦å®æ—¶åŒæ­¥

#### éš¾ç‚¹åˆ†æ
- ç”¨æˆ·è§‚çœ‹è§†é¢‘æ—¶éœ€è¦å®æ—¶è®°å½•è¿›åº¦
- å¤šç«¯åŒæ­¥ï¼ˆæ‰‹æœºã€å¹³æ¿ã€ç”µè„‘ï¼‰
- æ–­ç‚¹ç»­æ’­
- é«˜é¢‘å†™å…¥å¯èƒ½å½±å“æ•°æ®åº“æ€§èƒ½

#### è§£å†³æ–¹æ¡ˆ

**æ–¹æ¡ˆä¸€ï¼šå®šæ—¶ä¸ŠæŠ¥ + Redis ç¼“å­˜**
```typescript
// å‰ç«¯ï¼šæ¯ 30 ç§’ä¸ŠæŠ¥ä¸€æ¬¡è¿›åº¦
setInterval(() => {
  updateProgress({
    lessonId,
    position: videoPlayer.currentTime,
    duration: videoPlayer.duration
  });
}, 30000);

// åç«¯ï¼šå…ˆå†™ Redisï¼Œå®šæœŸæ‰¹é‡å†™å…¥æ•°æ®åº“
@Post('learning/progress')
async updateProgress(@Body() dto: UpdateProgressDto) {
  // 1. æ›´æ–° Redis ç¼“å­˜ï¼ˆå®æ—¶ï¼‰
  await this.redis.set(
    `progress:${userId}:${lessonId}`,
    JSON.stringify(dto),
    'EX', 3600
  );

  // 2. å‘é€æ¶ˆæ¯åˆ°é˜Ÿåˆ—ï¼ˆå¼‚æ­¥æ‰¹é‡å†™å…¥æ•°æ®åº“ï¼‰
  await this.queue.add('sync-progress', { userId, lessonId, ...dto });

  return { success: true };
}

// æ¶ˆè´¹è€…ï¼šæ‰¹é‡å†™å…¥æ•°æ®åº“
@Process('sync-progress')
async syncProgress(job: Job) {
  const { userId, lessonId, position, duration } = job.data;

  await this.prisma.userLearningProgress.upsert({
    where: { userId_lessonId: { userId, lessonId } },
    update: { position, duration, updatedAt: new Date() },
    create: { userId, lessonId, position, duration }
  });
}
```

**æ–¹æ¡ˆäºŒï¼šWebSocket å®æ—¶åŒæ­¥ï¼ˆå¤šç«¯åŒæ­¥ï¼‰**
```typescript
// å®¢æˆ·ç«¯ A æ›´æ–°è¿›åº¦
socket.emit('progress:update', { lessonId, position });

// æœåŠ¡ç«¯å¹¿æ’­åˆ°å®¢æˆ·ç«¯ B
io.to(`user:${userId}`).emit('progress:sync', { lessonId, position });

// å®¢æˆ·ç«¯ B åŒæ­¥è¿›åº¦
socket.on('progress:sync', (data) => {
  videoPlayer.currentTime = data.position;
});
```

---

### 7.2 ç­”é¢˜æ‰¹æ”¹ä¸ç»Ÿè®¡

#### éš¾ç‚¹åˆ†æ
- å®æ—¶æ‰¹æ”¹å¤§é‡è¯•å·
- å¤æ‚çš„ç»Ÿè®¡åˆ†æï¼ˆå„ç»´åº¦æŒæ¡åº¦ï¼‰
- å†å²æ•°æ®é‡å·¨å¤§ï¼ˆç™¾ä¸‡çº§ç­”é¢˜è®°å½•ï¼‰

#### è§£å†³æ–¹æ¡ˆ

**å®¢è§‚é¢˜è‡ªåŠ¨æ‰¹æ”¹**
```typescript
@Post('answers')
async submitAnswer(@Body() dto: SubmitAnswerDto) {
  const question = await this.getQuestion(dto.questionId);

  // å‰ç«¯å·²ç»æ¯”å¯¹ç­”æ¡ˆï¼Œåç«¯åªåšéªŒè¯å’Œè®°å½•
  const isCorrect = this.verifyAnswer(question, dto.userAnswer);

  // å¼‚æ­¥è®°å½•ç­”é¢˜è®°å½•ï¼ˆä¸é˜»å¡å“åº”ï¼‰
  this.queue.add('record-answer', {
    userId: dto.userId,
    questionId: dto.questionId,
    userAnswer: dto.userAnswer,
    isCorrect,
    timeSpent: dto.timeSpent
  });

  // ç«‹å³è¿”å›ç»“æœ
  return {
    isCorrect,
    correctAnswer: question.answer,
    explanation: question.explanation
  };
}
```

**ç»Ÿè®¡åˆ†æä¼˜åŒ–**
```typescript
// 1. é¢„è®¡ç®—ï¼šå®šæ—¶ä»»åŠ¡æ¯å¤©å‡Œæ™¨è®¡ç®—ç»Ÿè®¡æ•°æ®
@Cron('0 0 * * *') // æ¯å¤©å‡Œæ™¨æ‰§è¡Œ
async calculateDailyStats() {
  const users = await this.getActiveUsers();

  for (const user of users) {
    // è®¡ç®—å„ç»´åº¦ç»Ÿè®¡
    const stats = await this.calculateUserStats(user.id);

    // å­˜å‚¨åˆ°ç»Ÿè®¡è¡¨
    await this.saveStats(user.id, stats);
  }
}

// 2. ç¼“å­˜ï¼šçƒ­ç‚¹ç»Ÿè®¡æ•°æ®ç¼“å­˜åˆ° Redis
@Get('stats/overview')
async getOverview(@User() user) {
  // å…ˆæŸ¥ Redis
  const cached = await this.redis.get(`stats:overview:${user.id}`);
  if (cached) return JSON.parse(cached);

  // æŸ¥æ•°æ®åº“
  const stats = await this.getStatsFromDB(user.id);

  // å†™å…¥ Redisï¼ˆ1å°æ—¶è¿‡æœŸï¼‰
  await this.redis.set(
    `stats:overview:${user.id}`,
    JSON.stringify(stats),
    'EX', 3600
  );

  return stats;
}
```

**å¤§æ•°æ®é‡å¤„ç†**
```typescript
// ä½¿ç”¨ ClickHouse å­˜å‚¨æµ·é‡ç­”é¢˜æ—¥å¿—
// PostgreSQL åªå­˜å‚¨æ±‡æ€»æ•°æ®ï¼ŒClickHouse å­˜å‚¨æ˜ç»†æ•°æ®

// æŸ¥è¯¢å†å²ç­”é¢˜è®°å½•ï¼ˆClickHouseï¼‰
SELECT
  subject_id,
  COUNT(*) as total,
  SUM(is_correct) as correct,
  AVG(time_spent) as avg_time
FROM answer_logs
WHERE user_id = 12345
  AND created_at >= '2024-01-01'
GROUP BY subject_id
```

---

### 7.3 æ’è¡Œæ¦œç³»ç»Ÿ

#### éš¾ç‚¹åˆ†æ
- å®æ—¶æ›´æ–°
- é«˜å¹¶å‘è¯»å–
- å¤šç»´åº¦æ’åï¼ˆå…¨æ ¡ã€ç­çº§ã€å­¦ç§‘ï¼‰

#### è§£å†³æ–¹æ¡ˆ

**Redis Sorted Set å®ç°æ’è¡Œæ¦œ**
```typescript
// æ›´æ–°ç”¨æˆ·ç§¯åˆ†
async updateRanking(userId: number, score: number) {
  // å…¨æ ¡æ’è¡Œæ¦œ
  await this.redis.zadd('ranking:school:week', score, userId);

  // ç­çº§æ’è¡Œæ¦œ
  const classId = await this.getUserClassId(userId);
  await this.redis.zadd(`ranking:class:${classId}:week`, score, userId);

  // å­¦ç§‘æ’è¡Œæ¦œ
  await this.redis.zadd(`ranking:subject:math:week`, score, userId);
}

// è·å–æ’è¡Œæ¦œ
async getRanking(type: string, limit: number = 100) {
  const key = `ranking:${type}:week`;

  // è·å–å‰ N åï¼ˆåˆ†æ•°ä»é«˜åˆ°ä½ï¼‰
  const rankings = await this.redis.zrevrange(
    key,
    0,
    limit - 1,
    'WITHSCORES'
  );

  return this.formatRankings(rankings);
}

// è·å–ç”¨æˆ·æ’å
async getUserRank(userId: number) {
  const rank = await this.redis.zrevrank('ranking:school:week', userId);
  return rank + 1; // æ’åä» 1 å¼€å§‹
}

// å®šæ—¶ä»»åŠ¡ï¼šæ¯å‘¨ä¸€é‡ç½®æ’è¡Œæ¦œ
@Cron('0 0 * * 1') // æ¯å‘¨ä¸€å‡Œæ™¨æ‰§è¡Œ
async resetWeeklyRanking() {
  // å¿«ç…§åˆ°æ•°æ®åº“
  await this.snapshotRanking('ranking:school:week');

  // åˆ é™¤ Redis ä¸­çš„æ•°æ®
  await this.redis.del('ranking:school:week');
}
```

---

### 7.4 è§†é¢‘æ’­æ”¾ä¸é˜²ç›—é“¾

#### éš¾ç‚¹åˆ†æ
- è§†é¢‘èµ„æºé˜²ç›—
- æ’­æ”¾æµç•…åº¦
- å¸¦å®½æˆæœ¬æ§åˆ¶

#### è§£å†³æ–¹æ¡ˆ

**é˜²ç›—é“¾ï¼šURL ç­¾å**
```typescript
@Get('lessons/:id/video-url')
async getVideoUrl(@Param('id') lessonId: number, @User() user) {
  // 1. éªŒè¯ç”¨æˆ·æƒé™
  const hasPermission = await this.checkPermission(user.id, lessonId);
  if (!hasPermission) throw new ForbiddenException();

  // 2. ç”Ÿæˆç­¾å URLï¼ˆæœ‰æ•ˆæœŸ 1 å°æ—¶ï¼‰
  const videoKey = await this.getVideoKey(lessonId);
  const signedUrl = this.ossService.generateSignedUrl(videoKey, 3600);

  return { url: signedUrl };
}

// OSS ç­¾å URL ç”Ÿæˆ
generateSignedUrl(key: string, expiresIn: number) {
  const expires = Date.now() + expiresIn * 1000;
  const signature = crypto
    .createHmac('sha256', this.secretKey)
    .update(`${key}:${expires}`)
    .digest('hex');

  return `${this.ossEndpoint}/${key}?expires=${expires}&signature=${signature}`;
}
```

**æµç•…æ’­æ”¾ï¼šCDN + HLS åˆ‡ç‰‡**
```typescript
// è§†é¢‘ä¸Šä¼ æ—¶è‡ªåŠ¨è½¬ç ä¸º HLS æ ¼å¼
async uploadVideo(file: Express.Multer.File) {
  // 1. ä¸Šä¼ åˆ° OSS
  const objectKey = await this.ossService.upload(file);

  // 2. è§¦å‘è½¬ç ä»»åŠ¡ï¼ˆé˜¿é‡Œäº‘è§†é¢‘ç‚¹æ’­æœåŠ¡ï¼‰
  const transcodeJob = await this.vodService.createTranscodeJob({
    input: objectKey,
    output: {
      format: 'HLS', // HTTP Live Streaming
      resolutions: ['720p', '480p', '360p'] // å¤šæ¸…æ™°åº¦
    }
  });

  return { jobId: transcodeJob.id };
}

// å‰ç«¯æ’­æ”¾å™¨è‡ªé€‚åº”æ¸…æ™°åº¦
<video>
  <source src="https://cdn.example.com/video/lesson123.m3u8" type="application/x-mpegURL" />
</video>
```

**æˆæœ¬ä¼˜åŒ–**
```yaml
ç­–ç•¥:
  1. çƒ­é—¨è¯¾ç¨‹é¢„çƒ­åˆ° CDNï¼ˆå‡å°‘å›æºï¼‰
  2. å†·é—¨è¯¾ç¨‹è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆèŠ‚çœå­˜å‚¨ï¼‰
  3. ä½åˆ†è¾¨ç‡ä¼˜å…ˆï¼ˆèŠ‚çœå¸¦å®½ï¼‰
  4. ç›‘æ§æµé‡å¼‚å¸¸ï¼ˆé˜²æ­¢ç›—é“¾ï¼‰
```

---

### 7.5 é«˜å¹¶å‘åœºæ™¯å¤„ç†

#### éš¾ç‚¹åˆ†æ
- è€ƒè¯•é«˜å³°æœŸå¤§é‡å­¦ç”ŸåŒæ—¶ç­”é¢˜
- æ’è¡Œæ¦œåˆ·æ–°å‹åŠ›
- è®¨è®ºåŒºçƒ­å¸–è®¿é—®

#### è§£å†³æ–¹æ¡ˆ

**é™æµé™çº§**
```typescript
// ä½¿ç”¨ Redis + ä»¤ç‰Œæ¡¶ç®—æ³•é™æµ
@UseGuards(ThrottlerGuard)
@Throttle(100, 60) // æ¯åˆ†é’Ÿ 100 æ¬¡
@Post('answers')
async submitAnswer(@Body() dto: SubmitAnswerDto) {
  // ...
}

// è‡ªå®šä¹‰é™æµå™¨
@Injectable()
export class RateLimiter {
  async checkLimit(key: string, limit: number, window: number): Promise<boolean> {
    const current = await this.redis.incr(key);

    if (current === 1) {
      await this.redis.expire(key, window);
    }

    return current <= limit;
  }
}

// ç†”æ–­æœºåˆ¶
@Injectable()
export class CircuitBreaker {
  private failures = 0;
  private state = 'CLOSED'; // CLOSED, OPEN, HALF_OPEN

  async call(fn: Function) {
    if (this.state === 'OPEN') {
      throw new ServiceUnavailableException('æœåŠ¡æš‚æ—¶ä¸å¯ç”¨');
    }

    try {
      const result = await fn();
      this.onSuccess();
      return result;
    } catch (error) {
      this.onFailure();
      throw error;
    }
  }

  private onFailure() {
    this.failures++;
    if (this.failures >= 5) {
      this.state = 'OPEN';
      // 30 ç§’åå°è¯•æ¢å¤
      setTimeout(() => { this.state = 'HALF_OPEN'; }, 30000);
    }
  }

  private onSuccess() {
    this.failures = 0;
    this.state = 'CLOSED';
  }
}
```

**æ•°æ®åº“ä¼˜åŒ–**
```sql
-- è¯»å†™åˆ†ç¦»é…ç½®ï¼ˆPrismaï¼‰
const prisma = new PrismaClient({
  datasources: {
    db: {
      url: process.env.DATABASE_WRITE_URL, -- ä¸»åº“ï¼ˆå†™ï¼‰
    },
  },
  replicas: [
    { url: process.env.DATABASE_READ_URL_1 }, -- ä»åº“ 1ï¼ˆè¯»ï¼‰
    { url: process.env.DATABASE_READ_URL_2 }, -- ä»åº“ 2ï¼ˆè¯»ï¼‰
  ],
});

-- ä½¿ç”¨
await prisma.$replica().users.findMany(); // ä»åº“è¯»å–
await prisma.users.create({ data: {} });  // ä¸»åº“å†™å…¥
```

**ç¼“å­˜ç­–ç•¥**
```typescript
// å¤šçº§ç¼“å­˜ï¼šæœ¬åœ°ç¼“å­˜ + Redis
@Injectable()
export class CacheService {
  private localCache = new Map(); // æœ¬åœ°å†…å­˜ç¼“å­˜

  async get(key: string) {
    // 1. å…ˆæŸ¥æœ¬åœ°ç¼“å­˜ï¼ˆæœ€å¿«ï¼‰
    if (this.localCache.has(key)) {
      return this.localCache.get(key);
    }

    // 2. å†æŸ¥ Redisï¼ˆæ¬¡å¿«ï¼‰
    const redisValue = await this.redis.get(key);
    if (redisValue) {
      this.localCache.set(key, redisValue);
      return redisValue;
    }

    // 3. æœ€åæŸ¥æ•°æ®åº“ï¼ˆæœ€æ…¢ï¼‰
    const dbValue = await this.db.get(key);
    if (dbValue) {
      await this.redis.set(key, dbValue, 'EX', 3600);
      this.localCache.set(key, dbValue);
    }

    return dbValue;
  }
}

// ç¼“å­˜é¢„çƒ­ï¼šåœ¨æœåŠ¡å¯åŠ¨æ—¶åŠ è½½çƒ­ç‚¹æ•°æ®
async onModuleInit() {
  const hotSubjects = await this.prisma.subjects.findMany();
  for (const subject of hotSubjects) {
    await this.cacheService.set(`subject:${subject.id}`, subject);
  }
}
```

---

## 8. æ€§èƒ½ä¸æ‰©å±•æ€§

### 8.1 ä¸åŒè§„æ¨¡çš„æœåŠ¡å™¨é…ç½®

#### å°è§„æ¨¡ï¼š100-500 äººåœ¨çº¿
**æœˆæˆæœ¬ï¼šçº¦ Â¥1,000**

```yaml
åº”ç”¨æœåŠ¡å™¨: 2æ ¸4G Ã— 1å° (Â¥300/æœˆ)
æ•°æ®åº“: RDS 4G (Â¥400/æœˆ)
Redis: 1G (Â¥100/æœˆ)
OSS: 50GB (Â¥50/æœˆ)
CDN: 500GB (Â¥150/æœˆ)

æ€§èƒ½æŒ‡æ ‡:
  - QPS: 50-200
  - å“åº”æ—¶é—´: <300ms
  - å¹¶å‘ç”¨æˆ·: 100-500
```

#### ä¸­è§„æ¨¡ï¼š500-1000 äººåœ¨çº¿
**æœˆæˆæœ¬ï¼šçº¦ Â¥2,000**

```yaml
åº”ç”¨æœåŠ¡å™¨: 4æ ¸8G Ã— 1å° (Â¥500/æœˆ)
æ•°æ®åº“: RDS 8G (Â¥800/æœˆ)
Redis: 2G (Â¥200/æœˆ)
OSS: 100GB (Â¥100/æœˆ)
CDN: 1TB (Â¥300/æœˆ)
è´Ÿè½½å‡è¡¡: SLB (Â¥100/æœˆ)

æ€§èƒ½æŒ‡æ ‡:
  - QPS: 200-500
  - å“åº”æ—¶é—´: <200ms
  - å¹¶å‘ç”¨æˆ·: 500-1000
```

#### ä¸­å¤§è§„æ¨¡ï¼š1000-5000 äººåœ¨çº¿
**æœˆæˆæœ¬ï¼šçº¦ Â¥3,500**

```yaml
åº”ç”¨æœåŠ¡å™¨: 4æ ¸8G Ã— 2å° + è´Ÿè½½å‡è¡¡ (Â¥1,200/æœˆ)
æ•°æ®åº“: RDS 16G (1ä¸»1ä») (Â¥2,000/æœˆ)
Redis: 4G (Â¥300/æœˆ)
OSS: 200GB (Â¥200/æœˆ)
CDN: 2TB (Â¥600/æœˆ)
æ¶ˆæ¯é˜Ÿåˆ—: RabbitMQ (Â¥200/æœˆ)

æ€§èƒ½æŒ‡æ ‡:
  - QPS: 500-2000
  - å“åº”æ—¶é—´: <200ms
  - å¹¶å‘ç”¨æˆ·: 1000-5000
```

#### å¤§è§„æ¨¡ï¼š5000-20000 äººåœ¨çº¿
**æœˆæˆæœ¬ï¼šçº¦ Â¥15,000**

```yaml
åº”ç”¨æœåŠ¡å™¨: 8æ ¸16G Ã— 4å° (Â¥4,000/æœˆ)
è´Ÿè½½å‡è¡¡: SLB HA (Â¥500/æœˆ)
æ•°æ®åº“: RDS 32G (1ä¸»2ä») (Â¥6,000/æœˆ)
Redis: 8G ä¸»ä» (Â¥800/æœˆ)
Elasticsearch: 4æ ¸8G (Â¥800/æœˆ)
OSS: 1TB (Â¥500/æœˆ)
CDN: 10TB (Â¥2,000/æœˆ)
æ¶ˆæ¯é˜Ÿåˆ—: RabbitMQ Cluster (Â¥600/æœˆ)
ç›‘æ§: Prometheus + Grafana (Â¥300/æœˆ)

æ€§èƒ½æŒ‡æ ‡:
  - QPS: 2000-10000
  - å“åº”æ—¶é—´: <150ms
  - å¹¶å‘ç”¨æˆ·: 5000-20000
```

---

### 8.2 æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥æ¸…å•

#### åç«¯ä¼˜åŒ–
- [ ] **æ•°æ®åº“ä¼˜åŒ–**
  - [ ] æ·»åŠ å¿…è¦ç´¢å¼•
  - [ ] æ…¢æŸ¥è¯¢ä¼˜åŒ–ï¼ˆ<50msï¼‰
  - [ ] N+1 æŸ¥è¯¢ä¼˜åŒ–
  - [ ] è¿æ¥æ± é…ç½®ä¼˜åŒ–
  - [ ] è¯»å†™åˆ†ç¦»ï¼ˆå¤§è§„æ¨¡ï¼‰

- [ ] **ç¼“å­˜ä¼˜åŒ–**
  - [ ] çƒ­ç‚¹æ•°æ®ç¼“å­˜ï¼ˆRedisï¼‰
  - [ ] ç¼“å­˜å‘½ä¸­ç‡ >90%
  - [ ] ç¼“å­˜é¢„çƒ­
  - [ ] ç¼“å­˜å¤±æ•ˆç­–ç•¥

- [ ] **ä»£ç ä¼˜åŒ–**
  - [ ] å¼‚æ­¥å¤„ç†ï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰
  - [ ] æ‰¹é‡æ“ä½œï¼ˆå‡å°‘æ•°æ®åº“æŸ¥è¯¢ï¼‰
  - [ ] å‡å°‘ä¸å¿…è¦çš„è®¡ç®—
  - [ ] ä½¿ç”¨è¿æ¥æ± 

#### å‰ç«¯ä¼˜åŒ–
- [ ] **åŠ è½½ä¼˜åŒ–**
  - [ ] ä»£ç åˆ†å‰²ï¼ˆReact.lazyï¼‰
  - [ ] è·¯ç”±æ‡’åŠ è½½
  - [ ] å›¾ç‰‡æ‡’åŠ è½½
  - [ ] ç»„ä»¶æ‡’åŠ è½½
  - [ ] Bundle å¤§å° <500KB

- [ ] **æ¸²æŸ“ä¼˜åŒ–**
  - [ ] è™šæ‹Ÿåˆ—è¡¨ï¼ˆé•¿åˆ—è¡¨ï¼‰
  - [ ] React.memoï¼ˆå‡å°‘é‡æ¸²æŸ“ï¼‰
  - [ ] useMemo / useCallback
  - [ ] é˜²æŠ–/èŠ‚æµ

- [ ] **ç½‘ç»œä¼˜åŒ–**
  - [ ] API è¯·æ±‚åˆå¹¶
  - [ ] æ•°æ®é¢„å–
  - [ ] CDN åŠ é€Ÿ
  - [ ] HTTP/2

---

### 8.3 æ‰©å®¹ç­–ç•¥

```yaml
å¯åŠ¨æœŸ (0-1000 ç”¨æˆ·):
  é…ç½®: 2æ ¸4G + RDS 4G
  æˆæœ¬: Â¥1,000/æœˆ
  ç­–ç•¥: å•ä½“æ¶æ„ï¼Œå¿«é€Ÿè¿­ä»£

æˆé•¿æœŸ (1000-5000 ç”¨æˆ·):
  é…ç½®: 4æ ¸8GÃ—2 + RDS 16G (1ä¸»1ä»)
  æˆæœ¬: Â¥3,500/æœˆ
  ç­–ç•¥: è¯»å†™åˆ†ç¦»ï¼Œè´Ÿè½½å‡è¡¡
  è§¦å‘æ¡ä»¶: CPU >70%, å“åº”æ—¶é—´ >300ms

çˆ†å‘æœŸ (5000-20000 ç”¨æˆ·):
  é…ç½®: 8æ ¸16GÃ—4 + RDS 32G (1ä¸»2ä»)
  æˆæœ¬: Â¥15,000/æœˆ
  ç­–ç•¥: å¾®æœåŠ¡åŒ–ï¼Œåˆ†åº“åˆ†è¡¨
  è§¦å‘æ¡ä»¶: QPS >2000, æ•°æ®åº“è¿æ¥æ•° >200

æˆç†ŸæœŸ (20000+ ç”¨æˆ·):
  é…ç½®: K8s é›†ç¾¤ + å¤šåœ°åŸŸéƒ¨ç½²
  æˆæœ¬: Â¥50,000+/æœˆ
  ç­–ç•¥: å…¨é¢äº‘åŸç”Ÿï¼Œå¼¹æ€§æ‰©ç¼©å®¹
  è§¦å‘æ¡ä»¶: ç”¨æˆ·é‡æŒç»­å¢é•¿
```

---

## 9. æˆæœ¬é¢„ç®—

### 9.1 å¼€å‘æˆæœ¬ï¼ˆMVP + V1.0ï¼Œ4ä¸ªæœˆï¼‰

#### äººåŠ›æˆæœ¬
| è§’è‰² | äººæ•° | æœˆè–ªï¼ˆå…ƒï¼‰ | 4ä¸ªæœˆæˆæœ¬ï¼ˆå…ƒï¼‰ |
|------|------|-----------|---------------|
| äº§å“ç»ç† | 1 | 15,000 | 60,000 |
| å‰ç«¯å·¥ç¨‹å¸ˆ | 2 | 18,000 | 144,000 |
| åç«¯å·¥ç¨‹å¸ˆ | 2 | 20,000 | 160,000 |
| UI/UX è®¾è®¡å¸ˆ | 1 | 12,000 | 48,000 |
| æµ‹è¯•å·¥ç¨‹å¸ˆ | 1 | 12,000 | 48,000 |
| è¿ç»´å·¥ç¨‹å¸ˆ | 1 | 15,000 | 30,000 (å2ä¸ªæœˆ) |
| **åˆè®¡** | **8äºº** | - | **490,000** |

#### æœåŠ¡å™¨æˆæœ¬ï¼ˆ4ä¸ªæœˆï¼‰
| æœåŠ¡ | é…ç½® | æœˆæˆæœ¬ï¼ˆå…ƒï¼‰ | 4ä¸ªæœˆæˆæœ¬ï¼ˆå…ƒï¼‰ |
|------|------|------------|---------------|
| åº”ç”¨æœåŠ¡å™¨ | 4æ ¸8G | 500 | 2,000 |
| æ•°æ®åº“ | RDS 8G | 800 | 3,200 |
| Redis | 2G | 200 | 800 |
| OSS | 100GB | 100 | 400 |
| CDN | 1TB | 300 | 1,200 |
| åŸŸå+SSL | - | 100 | 400 |
| **åˆè®¡** | - | **2,000** | **8,000** |

#### å…¶ä»–æˆæœ¬
| é¡¹ç›® | æˆæœ¬ï¼ˆå…ƒï¼‰ |
|------|-----------|
| ç¬¬ä¸‰æ–¹æœåŠ¡ï¼ˆçŸ­ä¿¡ã€OSSç­‰ï¼‰ | 5,000 |
| è®¾è®¡ç´ æ/å·¥å…· | 3,000 |
| é¡¹ç›®ç®¡ç†å·¥å…· | 2,000 |
| **åˆè®¡** | **10,000** |

#### æ€»æˆæœ¬
```
äººåŠ›æˆæœ¬: Â¥490,000
æœåŠ¡å™¨æˆæœ¬: Â¥8,000
å…¶ä»–æˆæœ¬: Â¥10,000
-----------------------------
æ€»è®¡: Â¥508,000 (çº¦ 50 ä¸‡)
```

---

### 9.2 è¿è¥æˆæœ¬ï¼ˆæ¯æœˆï¼‰

#### å°è§„æ¨¡ï¼ˆ500 äººï¼‰
```
æœåŠ¡å™¨: Â¥2,000/æœˆ
å®¢æœäººå‘˜: Â¥8,000/æœˆï¼ˆ1äººå…¼èŒï¼‰
å†…å®¹è¿è¥: Â¥10,000/æœˆï¼ˆ1äººï¼‰
-----------------------------
åˆè®¡: Â¥20,000/æœˆ
```

#### ä¸­è§„æ¨¡ï¼ˆ1000-5000 äººï¼‰
```
æœåŠ¡å™¨: Â¥3,500/æœˆ
æŠ€æœ¯ç»´æŠ¤: Â¥20,000/æœˆï¼ˆ1äººï¼‰
å®¢æœå›¢é˜Ÿ: Â¥24,000/æœˆï¼ˆ3äººï¼‰
å†…å®¹è¿è¥: Â¥30,000/æœˆï¼ˆ2äººï¼‰
å¸‚åœºæ¨å¹¿: Â¥50,000/æœˆ
-----------------------------
åˆè®¡: Â¥127,500/æœˆ
```

#### å¤§è§„æ¨¡ï¼ˆ5000+ äººï¼‰
```
æœåŠ¡å™¨: Â¥15,000/æœˆ
æŠ€æœ¯å›¢é˜Ÿ: Â¥80,000/æœˆï¼ˆ4äººï¼‰
å®¢æœå›¢é˜Ÿ: Â¥40,000/æœˆï¼ˆ5äººï¼‰
è¿è¥å›¢é˜Ÿ: Â¥60,000/æœˆï¼ˆ4äººï¼‰
å¸‚åœºæ¨å¹¿: Â¥150,000/æœˆ
-----------------------------
åˆè®¡: Â¥345,000/æœˆ
```

---

### 9.3 æˆæœ¬ä¼˜åŒ–å»ºè®®

#### å¼€å‘æœŸä¼˜åŒ–
1. **ä½¿ç”¨å¼€æºæŠ€æœ¯æ ˆ**ï¼ˆå‡å°‘æˆæƒè´¹ç”¨ï¼‰
2. **äº‘æœåŠ¡æŒ‰é‡è®¡è´¹**ï¼ˆåˆæœŸä½æˆæœ¬ï¼‰
3. **å¤–åŒ…è®¾è®¡**ï¼ˆèŠ‚çœå…¨èŒè®¾è®¡å¸ˆæˆæœ¬ï¼‰
4. **è¿œç¨‹åŠå…¬**ï¼ˆèŠ‚çœåŠå…¬åœºåœ°æˆæœ¬ï¼‰

#### è¿è¥æœŸä¼˜åŒ–
1. **æå‡ç¼“å­˜å‘½ä¸­ç‡**ï¼ˆå‡å°‘æ•°æ®åº“å‹åŠ›ï¼‰
2. **CDN ä¼˜åŒ–**ï¼ˆå‡å°‘å¸¦å®½æˆæœ¬ï¼‰
3. **å†·æ•°æ®å½’æ¡£**ï¼ˆèŠ‚çœå­˜å‚¨æˆæœ¬ï¼‰
4. **é¢„ç•™å®ä¾‹**ï¼ˆé•¿æœŸä½¿ç”¨å¯äº« 5-7 æŠ˜ï¼‰
5. **è‡ªåŠ¨æ‰©ç¼©å®¹**ï¼ˆéé«˜å³°æœŸé™ä½é…ç½®ï¼‰

---

## 10. è´¨é‡ä¿è¯

### 10.1 æµ‹è¯•ç­–ç•¥

#### å•å…ƒæµ‹è¯•
```typescript
// ç›®æ ‡ï¼šä»£ç è¦†ç›–ç‡ >80%

// ç¤ºä¾‹ï¼šç”¨æˆ·æ³¨å†Œæµ‹è¯•
describe('UserService', () => {
  describe('register', () => {
    it('should create a new user', async () => {
      const dto = {
        email: 'test@example.com',
        password: 'Password123!',
        username: 'testuser'
      };

      const user = await userService.register(dto);

      expect(user).toBeDefined();
      expect(user.email).toBe(dto.email);
      expect(user.password).not.toBe(dto.password); // å¯†ç å·²åŠ å¯†
    });

    it('should throw error if email exists', async () => {
      const dto = { email: 'existing@example.com', ... };

      await expect(userService.register(dto))
        .rejects.toThrow('é‚®ç®±å·²å­˜åœ¨');
    });
  });
});
```

#### é›†æˆæµ‹è¯•
```typescript
// æµ‹è¯• API æ¥å£
describe('POST /api/auth/register', () => {
  it('should register a new user', async () => {
    const response = await request(app.getHttpServer())
      .post('/api/auth/register')
      .send({
        email: 'test@example.com',
        password: 'Password123!',
        username: 'testuser'
      })
      .expect(201);

    expect(response.body.success).toBe(true);
    expect(response.body.data.user).toBeDefined();
  });
});
```

#### E2E æµ‹è¯•
```typescript
// ä½¿ç”¨ Playwright æµ‹è¯•ç”¨æˆ·æµç¨‹
test('user can register and login', async ({ page }) => {
  // 1. è®¿é—®æ³¨å†Œé¡µé¢
  await page.goto('/register');

  // 2. å¡«å†™æ³¨å†Œè¡¨å•
  await page.fill('[name="email"]', 'test@example.com');
  await page.fill('[name="password"]', 'Password123!');
  await page.click('button[type="submit"]');

  // 3. éªŒè¯æ³¨å†ŒæˆåŠŸ
  await expect(page).toHaveURL('/dashboard');

  // 4. é€€å‡ºç™»å½•
  await page.click('[data-testid="logout"]');

  // 5. é‡æ–°ç™»å½•
  await page.goto('/login');
  await page.fill('[name="email"]', 'test@example.com');
  await page.fill('[name="password"]', 'Password123!');
  await page.click('button[type="submit"]');

  // 6. éªŒè¯ç™»å½•æˆåŠŸ
  await expect(page).toHaveURL('/dashboard');
});
```

#### æ€§èƒ½æµ‹è¯•
```yaml
# ä½¿ç”¨ K6 è¿›è¡Œè´Ÿè½½æµ‹è¯•
import http from 'k6/http';
import { check, sleep } from 'k6';

export const options = {
  stages: [
    { duration: '2m', target: 100 },  # 2åˆ†é’Ÿçˆ¬å¡åˆ°100ç”¨æˆ·
    { duration: '5m', target: 100 },  # ä¿æŒ100ç”¨æˆ·5åˆ†é’Ÿ
    { duration: '2m', target: 200 },  # çˆ¬å¡åˆ°200ç”¨æˆ·
    { duration: '5m', target: 200 },  # ä¿æŒ200ç”¨æˆ·5åˆ†é’Ÿ
    { duration: '2m', target: 0 },    # é™åˆ°0
  ],
  thresholds: {
    http_req_duration: ['p(95)<500'], # 95%çš„è¯·æ±‚<500ms
  },
};

export default function () {
  const res = http.get('https://api.example.com/api/subjects');
  check(res, {
    'status is 200': (r) => r.status === 200,
    'response time < 500ms': (r) => r.timings.duration < 500,
  });
  sleep(1);
}
```

---

### 10.2 ä»£ç è´¨é‡æ£€æŸ¥æ¸…å•

#### ä»£ç è§„èŒƒ
- [ ] ESLint é…ç½®å¹¶é€šè¿‡æ£€æŸ¥
- [ ] Prettier æ ¼å¼åŒ–
- [ ] TypeScript ä¸¥æ ¼æ¨¡å¼
- [ ] Commit è§„èŒƒï¼ˆConventional Commitsï¼‰
- [ ] ä»£ç å®¡æŸ¥ï¼ˆCode Reviewï¼‰

#### å®‰å…¨æ£€æŸ¥
- [ ] ä¾èµ–åŒ…æ¼æ´æ‰«æï¼ˆnpm auditï¼‰
- [ ] æ•æ„Ÿä¿¡æ¯æ£€æµ‹ï¼ˆç¯å¢ƒå˜é‡ï¼‰
- [ ] SQL æ³¨å…¥é˜²æŠ¤æµ‹è¯•
- [ ] XSS æ”»å‡»é˜²æŠ¤æµ‹è¯•
- [ ] CSRF æ”»å‡»é˜²æŠ¤æµ‹è¯•
- [ ] API é™æµé…ç½®

#### æ€§èƒ½æ£€æŸ¥
- [ ] API å“åº”æ—¶é—´ <200ms
- [ ] é¡µé¢é¦–å±åŠ è½½ <3s
- [ ] Bundle å¤§å° <500KB
- [ ] æ•°æ®åº“æ…¢æŸ¥è¯¢ <50ms
- [ ] ç¼“å­˜å‘½ä¸­ç‡ >90%

---

### 10.3 ä¸Šçº¿æ£€æŸ¥æ¸…å•

#### åŠŸèƒ½å®Œæ•´æ€§
- [ ] æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] è¾¹ç•Œæƒ…å†µæµ‹è¯•é€šè¿‡
- [ ] å¼‚å¸¸æƒ…å†µå¤„ç†æ­£ç¡®
- [ ] ç§»åŠ¨ç«¯é€‚é…å®Œæ•´

#### æ€§èƒ½æŒ‡æ ‡
- [ ] è´Ÿè½½æµ‹è¯•é€šè¿‡ï¼ˆ1000+ å¹¶å‘ï¼‰
- [ ] å‹åŠ›æµ‹è¯•é€šè¿‡
- [ ] API å“åº”æ—¶é—´è¾¾æ ‡
- [ ] æ•°æ®åº“æ€§èƒ½è¾¾æ ‡

#### å®‰å…¨æ€§
- [ ] æ¸—é€æµ‹è¯•é€šè¿‡
- [ ] æ¼æ´æ‰«æé€šè¿‡
- [ ] SSL è¯ä¹¦é…ç½®æ­£ç¡®
- [ ] å¤‡ä»½ç­–ç•¥é…ç½®å®Œæˆ

#### ç›‘æ§å‘Šè­¦
- [ ] Sentry é”™è¯¯ç›‘æ§é…ç½®
- [ ] Google Analytics é…ç½®
- [ ] æœåŠ¡å™¨ç›‘æ§é…ç½®
- [ ] å‘Šè­¦è§„åˆ™é…ç½®

#### æ–‡æ¡£å‡†å¤‡
- [ ] API æ–‡æ¡£å®Œæ•´
- [ ] ç”¨æˆ·æ‰‹å†Œå‡†å¤‡
- [ ] è¿ç»´æ–‡æ¡£å‡†å¤‡
- [ ] åº”æ€¥é¢„æ¡ˆå‡†å¤‡

---

## 11. é™„å½•

### 11.1 å¼€å‘è§„èŒƒ

#### Git Commit è§„èŒƒ
```
<type>(<scope>): <subject>

type:
  - feat: æ–°åŠŸèƒ½
  - fix: ä¿®å¤ bug
  - docs: æ–‡æ¡£æ›´æ–°
  - style: ä»£ç æ ¼å¼è°ƒæ•´
  - refactor: é‡æ„
  - test: æµ‹è¯•ç›¸å…³
  - chore: æ„å»º/å·¥å…·ç›¸å…³

ç¤ºä¾‹:
  feat(auth): æ·»åŠ éªŒè¯ç ç™»å½•åŠŸèƒ½
  fix(course): ä¿®å¤è§†é¢‘æ’­æ”¾è¿›åº¦ä¸åŒæ­¥çš„é—®é¢˜
  docs(api): æ›´æ–° API æ–‡æ¡£
```

#### ä»£ç å®¡æŸ¥æ£€æŸ¥é¡¹
- [ ] ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ
- [ ] æ²¡æœ‰æ˜æ˜¾çš„ bug
- [ ] é€»è¾‘æ¸…æ™°æ˜“æ‡‚
- [ ] æ²¡æœ‰å®‰å…¨éšæ‚£
- [ ] æ€§èƒ½æ²¡æœ‰æ˜æ˜¾é—®é¢˜
- [ ] æµ‹è¯•ç”¨ä¾‹å®Œæ•´
- [ ] æ³¨é‡Šæ¸…æ™°ï¼ˆå¤æ‚é€»è¾‘ï¼‰

---

### 11.2 å‚è€ƒèµ„æº

#### å®˜æ–¹æ–‡æ¡£
- React: https://react.dev
- NestJS: https://nestjs.com
- Prisma: https://www.prisma.io
- shadcn/ui: https://ui.shadcn.com
- PostgreSQL: https://www.postgresql.org

#### æŠ€æœ¯åšå®¢
- é˜¿é‡Œäº‘æŠ€æœ¯åšå®¢
- è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº
- InfoQ ä¸­æ–‡ç«™

#### å­¦ä¹ èµ„æº
- NestJS ä¸­æ–‡æ–‡æ¡£
- React å®˜æ–¹æ•™ç¨‹
- Prisma å®æˆ˜æŒ‡å—

---

### 11.3 å¸¸è§é—®é¢˜ FAQ

**Q1: ä¸ºä»€ä¹ˆé€‰æ‹© NestJS è€Œä¸æ˜¯ Expressï¼Ÿ**
A: NestJS æä¾›äº†æ›´å¥½çš„æ¨¡å—åŒ–è®¾è®¡ã€ä¾èµ–æ³¨å…¥ã€TypeScript åŸç”Ÿæ”¯æŒï¼Œé€‚åˆæ„å»ºä¼ä¸šçº§åº”ç”¨ã€‚Express æ›´é€‚åˆå°å‹é¡¹ç›®ã€‚

**Q2: æ˜¯å¦éœ€è¦ä½¿ç”¨ Dockerï¼Ÿ**
A: æ¨èä½¿ç”¨ã€‚Docker å¯ä»¥ä¿è¯å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒä¸€è‡´ï¼Œç®€åŒ–éƒ¨ç½²æµç¨‹ã€‚

**Q3: æ•°æ®åº“é€‰ MySQL è¿˜æ˜¯ PostgreSQLï¼Ÿ**
A: æ¨è PostgreSQLï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ï¼ˆæ”¯æŒ JSONã€å…¨æ–‡æœç´¢ç­‰ï¼‰ï¼Œæ€§èƒ½ä¹Ÿä¸é”™ã€‚MySQL ä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹©ã€‚

**Q4: å‰ç«¯çŠ¶æ€ç®¡ç†é€‰ Redux è¿˜æ˜¯ Zustandï¼Ÿ**
A: å°ä¸­å‹é¡¹ç›®æ¨è Zustandï¼ˆç®€å•è½»é‡ï¼‰ï¼Œå¤§å‹é¡¹ç›®å¯ä»¥è€ƒè™‘ Redux Toolkitã€‚

**Q5: ä»€ä¹ˆæ—¶å€™éœ€è¦å¾®æœåŠ¡åŒ–ï¼Ÿ**
A: å½“ç”¨æˆ·é‡è¶…è¿‡ 10000ï¼Œå•ä½“åº”ç”¨æ€§èƒ½å‡ºç°ç“¶é¢ˆæ—¶å†è€ƒè™‘å¾®æœåŠ¡åŒ–ã€‚è¿‡æ—©å¾®æœåŠ¡åŒ–ä¼šå¢åŠ å¤æ‚åº¦ã€‚

---

## 12. æ€»ç»“

æœ¬æ–‡æ¡£è¯¦ç»†è§„åˆ’äº†ä¸­å­¦ç”Ÿåœ¨çº¿æ•™è‚²å¹³å°ä» 0 åˆ° 1 çš„å®Œæ•´å¼€å‘è·¯å¾„ï¼ŒåŒ…æ‹¬ï¼š

âœ… **äº§å“åŠŸèƒ½è®¾è®¡**ï¼š6 å¤§æ ¸å¿ƒæ¨¡å—ï¼Œ25+ æ•°æ®è¡¨
âœ… **æŠ€æœ¯æ¶æ„è®¾è®¡**ï¼šå‰åç«¯åˆ†ç¦»ï¼Œå¾®æœåŠ¡åŒ–é¢„ç•™
âœ… **å¼€å‘è·¯çº¿å›¾**ï¼šMVPï¼ˆ2ä¸ªæœˆï¼‰â†’ V1.0ï¼ˆ2ä¸ªæœˆï¼‰â†’ V2.0ï¼ˆæŒç»­è¿­ä»£ï¼‰
âœ… **æŠ€æœ¯éš¾ç‚¹æ”»å…‹**ï¼šå­¦ä¹ è¿›åº¦åŒæ­¥ã€ç­”é¢˜æ‰¹æ”¹ã€æ’è¡Œæ¦œã€è§†é¢‘é˜²ç›—é“¾ã€é«˜å¹¶å‘
âœ… **æ€§èƒ½ä¸æ‰©å±•**ï¼šä» 500 åˆ° 20000+ å¹¶å‘çš„æ‰©å®¹æ–¹æ¡ˆ
âœ… **æˆæœ¬é¢„ç®—**ï¼šå¼€å‘æˆæœ¬ 50 ä¸‡ï¼Œè¿è¥æˆæœ¬ 2-15 ä¸‡/æœˆ
âœ… **è´¨é‡ä¿è¯**ï¼šæµ‹è¯•ç­–ç•¥ã€ä»£ç è§„èŒƒã€ä¸Šçº¿æ£€æŸ¥æ¸…å•

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰ç–‘é—®ï¼Œè¯·è”ç³»é¡¹ç›®è´Ÿè´£äººã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0
**æœ€åæ›´æ–°**ï¼š2025-01-08
**ä½œè€…**ï¼šäº§å“å›¢é˜Ÿ

---

*æœ¬æ–‡æ¡£ä¸ºå†…éƒ¨å¼€å‘æŒ‡å—ï¼Œè¯·å‹¿å¤–ä¼ ã€‚*
